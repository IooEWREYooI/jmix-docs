= 声明式操作

可以在视图 XML 描述中，任何实现了 `HasActions` 接口的组件（xref:vc/components/dataGrid.adoc[]、xref:vc/components/entityComboBox.adoc[]、xref:vc/components/entityPicker.adoc[] 等）都支持配置一组操作，视图本身也支持操作配置。操作用 `actions` 元素定义，该元素内部的 `action` 元素指定具体操作。

下面的示例中，为 `dataGrid` 声明了一组操作。

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/actions/actions-view.xml[tags=dataGrid-action]
----
<1> `list_create` 和 `list_edit` 操作是 xref:actions/standard-actions.adoc[标准操作]。标准操作的属性和行为通过类型进行定义。
<2> `sayHello` 操作的属性直接在 XML 中定义，操作的处理方法在视图控制器中定义。
<3> 与操作相关的按钮会使用操作的属性：文本、图标等。

`sayHello` 操作的处理方法需要在视图控制器定义：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/actions/ActionsView.java[tags=action]
----

在 `dataGrid` 中，操作也可以作为右键菜单展示：

image::actions/declarative-actions-1.png[align="center",width="601"]

[[attributes]]
== 操作属性

`action` 元素有下列属性：

* `id` - 标识符，在 `HasActions` 组件中必须唯一。

* `type` - 定义操作类型。
+
如果设置了该属性，框架会搜索带有 `@ActionType` 注解指定此类型的类，并用该类实例化此操作。参阅 xref:actions/standard-actions.adoc[标准操作] 了解如何使用框架提供的操作类型，以及 xref:actions/custom-action-type.adoc[自定义操作类型] 了解如何创建自定义操作。
+
如果未指定 `type` 属性，框架会创建一个 `BaseAction` 类的实例。

* `text` - 操作名称。与操作连接的按钮会展示该名称。

* `description` - 操作描述。与操作连接的按钮会用这个值作为 xref:vc/common-attributes.adoc#title[title] 属性。

* `enabled` - 定义操作和连接的按钮是否启用：`true`、`false`。

* `visible` - 定义操作和连接的按钮是否可见：`true`、`false`。

* `icon` - 操作图标。与操作连接的按钮会显示该图标。

* `actionVariant` - 定义操作的不同样式版本并设置连接按钮的 xref:vc/components/button.adoc#variants[样式版本]：`DEFAULT`、`PRIMARY`、`DANGER`、`SUCCESS`。

* `shortcutCombination` - 定义执行该操作的键盘快捷键。由键代码和修饰键组成，中间用 "-" 分隔。键代码和修饰键在 `com.vaadin.flow.component.Key` 类定义。视图 XML 中，需要以大写字母的方式使用。示例：
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/actions/actions-view.xml[tags=shortcut]
----

[[obtaining-action-in-controller]]
== 控制器中获取操作

视图控制器中，与其他的视图可视化组件一样，操作也可以通过注入的方式获取。因而能通过编程的方式进行操作配置。示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/actions/ActionsView.java[tags=action-inject]
----
