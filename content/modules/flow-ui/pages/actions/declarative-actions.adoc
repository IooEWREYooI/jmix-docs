= Декларативные действия

В XML-дескрипторе экрана для любого компонента, реализующего интерфейс `HasActions` (xref:vc/components/dataGrid.adoc[], xref:vc/components/entityComboBox.adoc[], xref:vc/components/entityPicker.adoc[], и др.), а также всего экрана, может быть задан набор действий. Это делается в элементе `actions`, который содержит вложенные элементы `action`.

В примере ниже набор действий декларируется для компонента `dataGrid`.

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/actions/actions-view.xml[tags=dataGrid-action]
----
<1> Действия `list_create` and `list_edit` являются xref:actions/standard-actions.adoc[стандартными]. Их свойства и поведение определяются их типами.
<2> Свойства действия `sayHello` задаются в данном XML-дескрипторе. Обработчик действия определяется в контроллере экрана.
<3> Кнопки, ассоциированные с действиями, получают из действий их свойства: `text`, `icon` и пр.

Обработчик действия `sayHello` задается в контроллере экрана:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/actions/ActionsView.java[tags=action]
----

Действие отображается в компоненте `dataGrid` пунктом контекстного меню:

image::actions/declarative-actions-1.png[align="center",width="601"]

[[attributes]]
== Атрибуты Action

Элемент `action` может иметь следующие атрибуты:

* `id` - идентификатор, должен быть уникален в рамках данного компонента `HasActions`.

* `type` - задает тип действия.
+
Если данный атрибут установлен, фреймворк находит класс, имеющий аннотацию `@ActionType` с указанным в `type` значением, и использует его для инстанциирования действия. Раздел xref:actions/standard-actions.adoc[] описывает типы действий, предоставляемые фреймворком, раздел xref:actions/custom-action-type.adoc[] объясняет, как создавать собственные типы действий.
+
Если тип не задан, фреймворк создает экземпляр класса `BaseAction`.

* `text` - название действия. Связанная кнопка или пункт контекстного меню будут отображать данный текст.

* `description` - описание действия. Связанная кнопка будет использовать данное значение для своего атрибута xref:vc/common-attributes.adoc#title[title].

* `enable` - признак доступности действия. Возможные значения: `true`, `false`.

* `visible` - - признак видимости действия. Возможные значения: `true`, `false`.

* `icon` - значок действия. Будет отображаться связанной кнопкой.

* `actionVariant` - задает вариант действия и xref:vc/components/button.adoc#variants[вариант] связанной кнопки: `DEFAULT`, `PRIMARY`, `DANGER`, `SUCCESS`.

* `shortcutCombination` - комбинация клавиш для вызова действия. Представляет собой комбинацию кодов клавиш и модификаторов, разделенных символом "-". Коды клавиш и модификаторы определены в классе `com.vaadin.flow.component.Key`. В XML-дескрипторе экрана они должны быть заданы в верхнем регистре. Например:
+
[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/actions/actions-view.xml[tags=shortcut]
----

[[obtaining-action-in-controller]]
== Получение ссылок на действия в контроллере

Любое определенное в XML действие можно инжектировать в контроллер, так же как и другие компоненты экрана. Это может понадобиться для программной установки свойств действия. Например:

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/actions/ActionsView.java[tags=action-inject]
----