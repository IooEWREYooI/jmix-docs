= dateTimePicker 日期时间

`dateTimePicker` 支持用户同时选择日期和时间。如果仅需要选择日期或时间，请使用 xref:vc/components/datePicker.adoc[datePicker] 或 xref:vc/components/timePicker.adoc[timePicker]。

* XML 元素：`dateTimePicker`

* Java 类：`TypedDateTimePicker`

== 基本用法

日期和时间可以直接通过键盘输入，或者在弹窗选择。当有任何输入或点击控件时，会显示选择弹窗。

image::visual-components/components/date-time-picker-basic.png[align="center", width="400"]

下面的示例定义了带标签的 `datePicker`：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/datetimepicker/date-time-picker-view.xml[tags=basics]
----

== 数据绑定

在视图 XML 中，使用 xref:vc/common-attributes.adoc#dataContainer[dataContainer] 和 xref:vc/common-attributes.adoc#property[property] 属性将数据与 `dateTimePicker` 绑定：

[source,xml,indent=0]
----
include::example$/onboarding/src/main/resources/com/company/onboarding/view/component/datetimepicker/date-time-picker-view.xml[tags=userDc]
----

在上面这个例子中，视图有 `User` 实体的数据容器 `userDc`，`User` 实体拥有 `passwordExpiration` 属性。XML 里面将 `dataContainer` 属性设置为这个数据容器，然后将 `property` 属性设置为实体字段。

== 数据类型

=== 数据感知的 DateTimePicker

绑定至实体属性的 `dateTimePicker` 组件将使用与属性相同的数据类型。

=== 独立的 DateTimePicker

如果此组件不关联任何实体属性，可以用 xref:vc/common-attributes.adoc#datatype[datatype] XML 属性手动设置数据类型，支持下列类型：

* `date`
* `dateTime`
* `localDateTime`
* `offsetTime`
* `localTime`
* `offsetDateTime`
* `time`
* `localDate`

== 间隔

弹窗中显示时间的默认间隔为 1 小时。但是也可以自定义间隔。

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/datetimepicker/DateTimePickerView.java[tags=dateTimePicker;onInit;step]
----

image::visual-components/components/date-time-picker-step.png[align="center", width="410"]

设置的时间间隔必须能整除一小时或一天。例如，“15分钟”、“30分钟”、“2小时” 都是有效的间隔；而 “42分钟” 则不是。

NOTE: 弹窗不会显示小于 15 分钟的间隔，是为了避免无效的时间选取。

== 日期和时间格式

应用程序中的默认时间日期格式是由 xref:data-model:data-types.adoc#localized-format-strings[本地日期格式字符串] 定义。如需使用不同格式，请在消息包添加自定义格式字符串。

如需为特定组件修改日期格式，可以单独设置所需的格式：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/datetimepicker/DateTimePickerView.java[tags=dateTimePicker;onInit;locale]
----

== 日期范围

如需将用户的输入控制在某个特定的日期范围内，可以指定组件的最大最小值。

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/datetimepicker/DateTimePickerView.java[tags=dateTimePicker;onInit;time-range]
----

还可以设置 <<validator, validator>> 检查日期是否符合某个特定的日期时间范围。

== XML 属性

xref:vc/common-attributes.adoc#id[id] -
<<autoOpen, autoOpen>> -
xref:vc/common-attributes.adoc#classNames[classNames] -
xref:vc/common-attributes.adoc#clearButtonVisible[clearButtonVisible] -
xref:vc/common-attributes.adoc#colspan[colspan] -
xref:vc/common-attributes.adoc#dataContainer[dataContainer] -
xref:vc/common-attributes.adoc#datatype[datatype] -
xref:vc/common-attributes.adoc#enabled[enabled] -
xref:vc/common-attributes.adoc#errorMessage[errorMessage] -
xref:vc/common-attributes.adoc#height[height] -
xref:vc/common-attributes.adoc#invalid[invalid] -
xref:vc/common-attributes.adoc#label[label] -
xref:vc/common-attributes.adoc#maxHeight[maxHeight] -
xref:vc/common-attributes.adoc#maxWidth[maxWidth] -
xref:vc/common-attributes.adoc#minHeight[minHeight] -
xref:vc/common-attributes.adoc#minWidth[minWidth] -
xref:vc/common-attributes.adoc#placeholder[placeholder] -
xref:vc/common-attributes.adoc#property[property] -
xref:vc/common-attributes.adoc#readOnly[readOnly] -
xref:vc/common-attributes.adoc#required[required] -
xref:vc/common-attributes.adoc#requiredIndicatorVisible[requiredIndicatorVisible] -
xref:vc/common-attributes.adoc#requiredMessage[requiredMessage] -
xref:vc/common-attributes.adoc#tabIndex[tabIndex] -
xref:vc/common-attributes.adoc#themeNames[themeNames] -
xref:vc/common-attributes.adoc#visible[visible] -
xref:vc/common-attributes.adoc#width[width]

[[autoOpen]]
=== autoOpen

定义当用户开始输入日期时是否显示日历弹窗。

* 如果设置为 `true`，当用户输入、点击日期按钮或控件时会打开日历弹窗。
* 如果设置为 `false`，仅当用户点击按钮或字段时才会打开日历弹窗。

== 事件和处理器

xref:vc/common-handlers.adoc#AttachEvent[AttachEvent] -
xref:vc/common-handlers.adoc#BlurEvent[BlurEvent] -
<<ChangeEvent, ChangeEvent>> -
<<ClientValidatedEvent, ClientValidatedEvent>> -
xref:vc/common-handlers.adoc#ComponentValueChangeEvent[ComponentValueChangeEvent] -
xref:vc/common-handlers.adoc#DetachEvent[DetachEvent] -
xref:vc/common-handlers.adoc#FocusEvent[FocusEvent] -
<<InvalidChangeEvent, InvalidChangeEvent>> -
<<OpenedChangeEvent, OpenedChangeEvent>> -
xref:vc/common-handlers.adoc#TypedValueChangeEvent[TypedValueChangeEvent] -
xref:vc/common-handlers.adoc#statusChangeHandler[statusChangeHandler] -
<<validator, validator>>

include::../handler-generation-tip.adoc[]

[[ChangeEvent]]
=== ChangeEvent
//todo: now deprecated. remove when it's removed from studio

`com.vaadin.flow.component.datepicker.GeneratedVaadinDatePicker.ChangeEvent` 对应 `change` DOM 事件。

[[ClientValidatedEvent]]
=== ClientValidatedEvent

`ClientValidatedEvent` 当在客户端完成数据验证时发送。

[[InvalidChangeEvent]]
=== InvalidChangeEvent

当组件的 xref:vc/common-attributes.adoc#invalid[invalid] 属性发生变化时发送 `com.vaadin.flow.component.datepicker.DatePicker.InvalidChangeEvent`。

[[OpenedChangeEvent]]
=== OpenedChangeEvent

当组件的 `opened` 属性发生变化时发送 `OpenedChangeEvent`。即，当日期面板打开或关闭时。

[[validator]]
=== validator

为组件添加验证器实例。当值无效时，验证器需要抛出 `ValidationException` 异常。示例：

[source,java,indent=0]
----
include::example$/onboarding/src/main/java/com/company/onboarding/view/component/datetimepicker/DateTimePickerView.java[tags=validator]
----

== XML 内部元素

xref:vc/components/tooltip.adoc[tooltip]

== 参考

{vaadin-docs}/components/date-time-picker[Vaadin 文档^]
