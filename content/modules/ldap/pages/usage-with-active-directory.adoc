= 使用 Active Directory

该扩展组件提供支持 Active Directory 的单独安全配置。由于 Active Directory 使用非标准的认证方法，比如使用带域名的用户名认证，用 `user@domain` 这样的格式而非 LDAP 中的完全限定名，Spring Security 也提供单独的 `AuthenticationProvider`，为典型的 Active Directory 配置而定制。

如果你需要使用 Active Directory，设置下面的应用程序属性：

[source,properties,indent=0]
----
jmix.ldap.use-active-directory-configuration = true
----

设置该属性表示应用程序将使用 `ActiveDirectoryLdapAuthenticationProvider`，更符合 Active Directory 的要求。

还需要指定 `ActiveDirectoryLdapAuthenticationProvider` 搜索用户时使用的搜索过滤器：

[source,properties,indent=0]
----
jmix.ldap.user-search-filter = (&(objectClass=user)(userPrincipalName={0}))
----

上面的示例中，用户需要输入 `username@domain` 格式的用户名。

或者，也可以按下面的方式配置认证 provider：

[source,properties,indent=0]
----
jmix.ldap.user-search-filter = (&(objectClass=user)(sAMAccountName={1}))
jmix.ldap.active-directory-domain = somedomain
----

此时，用户只需要输入用户名（不带 domain）即可。
