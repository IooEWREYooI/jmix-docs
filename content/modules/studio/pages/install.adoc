[[installation]]
= 安装

[[instructions]]
== 安装介绍

Jmix Studio 是一款 IntelliJ IDEA 的插件。参阅 xref:ROOT:setup.adoc#studio[配置] 章节的稳定版安装介绍。

[[working-behind-proxy]]
== 代理配置

为了让 Jmix Studio 能通过代理访问网络，需要配置 IntelliJ IDEA 和 Gradle。配置 Git 是可选的。

=== 配置 IDEA 代理

. 从主菜单打开 IDEA 的配置页：*File* -> *Settings*（Windows/Linux）或 *IntelliJ IDEA* -> *Preferences*（macOS）。
. 选择 *Appearance & Behavior → System Settings → HTTP Proxy*。
. 配置相关的参数后，点击 *Check connection* 测试。
+
image::idea-proxy.png[align="center"]

更多信息，请参阅 https://www.jetbrains.com/help/idea/settings-http-proxy.html[IntelliJ IDEA 文档^]。

=== 配置 Gradle 代理

. 在用户的 home 目录找到 `~/.gradle/gradle.properties` 文件。
. 根据 https://docs.gradle.org/current/userguide/build_environment.html#sec:accessing_the_web_via_a_proxy[Gradle 文档^] 编辑这个文件并添加需要的代理配置参数：
+
[source,properties]
----
systemProp.http.proxyHost=192.168.57.1
systemProp.http.proxyPort=3128
systemProp.http.proxyUser=developer
systemProp.http.proxyPassword=Df887..33
systemProp.http.nonProxyHosts=*.nonproxyrepos.com|localhost
----

=== 配置 Git 代理

如果需要从 GitHub 仓库下载项目，则需要为 Git 工具也配置代理。

运行这个命令：

[source,bash]
----
git config --global http.proxy http://proxyUsername:proxyPassword@proxy.server.com:port
----

更多信息，请参阅 https://git-scm.com/docs/git-config#Documentation/git-config.txt-httpproxy[Git 文档^]。

[[offline]]
== 离线工作

Studio 支持在没有网络的情况下开发项目。此时，项目的所有依赖必须已经加载，也就是说，项目已经使用 Studio 打开并装配过了。有些 Studio 的功能在离线状态不可用，例如，无法修改框架版本，也无法访问 Jmix 扩展组件市场。

开始使用离线模式，打开 IDE 右侧的 Gradle 工具窗口，然后点击 *Toggle Offline Mode* 按钮：

image::idea-offline.png[align="center"]

在离线模式下，Gradle 使用缓存的依赖执行所有的项目构建任务。Gradle 不会尝试去连接网络解决依赖。如果缓存中没有需要的依赖，则会构建失败。

[[non-standard-builds]]
== 非标准 Studio builds

有时候需要在 IDE 中安装非标准的 Studio builds，例如，想早一点使用最新的 Studio 功能。使用非标准的 Studio builds 其实就是要在 IDEA 中安装一个特定的插件版本。

NOTE: 注意，非标准的 Studio builds 与稳定版有相同的许可要求。

[[nightly]]
=== Nightly Builds

Nightly Studio builds 作为持续集成的一部分工作，会每晚发布。这些构建版本中，包含 Jmix Studio 团队实现的最新改动。如果想获得最新功能、改进和对即将发布的 Jmix 框架新版本的支持，则可以使用 nightly builds。

CAUTION: Nightly builds 中的改动并未经过质量保证流程的测试。因此，它们可能包含严重的功能缺陷。

如需使用 nightly builds，请按照下面的步骤：

. 打开 IDEA 的插件管理页 *Main Menu → File → Settings → Plugins*。
. 点击齿轮图标，并选择 *Manage Plugin Repositories...*.
+
image::idea-gear.png[align="center"]
+
. 点击 `+` 并输入：`\https://plugins.jetbrains.com/plugins/jmix_nightly/list`
+
image::idea-add.png[align="center"]
+
. 你会立即看到 Jmix 插件要求升级至 NIGHTLY 版本。
+
image::jmix-update.png[align="center"]
+
. 点击 *Update* 并重启 IDE。

由于 nightly builds 是每晚发布的，因此需要每天更新 Jmix 插件以获取最新的改动。

如需回退至插件的稳定版，按照以下步骤：

. 打开 *Main Menu → File → Settings → Plugins*。
. 切换至 *Installed* 标签页。
. 卸载 Jmix 插件。
. 点击齿轮图标并选择 *Manage Plugin Repositories...*。
. 从列表中删除 "nightly" 仓库。
. 重新安装 Jmix 插件，这次将从稳定版通道安装。

[[from-disk]]
=== 从硬盘安装插件

可以从插件仓库网站下载 Studio 插件的任何发布版，然后安装至 IntelliJ IDEA。按照下列步骤：

. 打开 JetBrains 插件仓库的 {jmix-plugin-site}[Jmix 插件网页^]。
. 选择需要下载的发布版通道：Stable 或 Nightly。
. 在 *Version History* 列表找到需要的版本，然后下载。
+
image::jmix-site.png[align="center"]
+
. 在 IDEA 中打开 *Main Menu → File → Settings → Plugins*。
. 点击齿轮图标并选择 *Install Plugin from Disk…​*。
+
image::install-from-disk.png[align="center"]
+
. 在文件树中选择下载的压缩包，并点击 *OK*。
. 重启 IDE。

