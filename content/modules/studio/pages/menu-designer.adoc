= 菜单设计器

新建项目时，主菜单的 xref:flow-ui:menu-config.adoc[结构] 保存在 `menu.xml` 文件中。Studio 提供可视化设计器用于配置主菜单。

include::subscription-note.adoc[]

访问主菜单结构的一个简单方法是双击 xref:studio:tool-window.adoc[Jmix 工具窗口] 的 *Main Menu*。

image::menu-open.png[align="center"]

在 *Structure* 标签页，可以查看并配置菜单，*Text* 标签页包含 XML 代码。

image:menu-designer.png[align="center"]

在可视化设计器中，可以将树中的菜单项拖放至新的位置。

[[menu-modes]]
== 菜单模式

默认情况下，使用 *Composite mode*。这种模式下，会包含所有来自应用程序 `menu.xml` 中的菜单，以及所有扩展组件和继承自框架中的菜单。其中继承的菜单项不能编辑。

image:menu-composite.png[align="center"]

当从 *Composite mode* 切换至 *Single mode* 时，Studio 会建议保留从框架和扩展组件继承的菜单项：

image:menu-suggest.png[align="center"]

在 *Single mode* 中，仅包含项目 `menu.xml` 文件中的菜单项。

image:menu-single.png[align="center"]

如果决定保留继承的菜单项，则将复制其结构至你的项目中，然后可以自定义编辑。如果以后决定将主菜单切换回复合模式，注意，需要手动从项目配置中删除所有重复的菜单项。否则，由于菜单结构不允许重复的菜单项，会导致菜单出错。

[[adding-menu-items]]
== 添加菜单项

如需添加菜单项，点击设计器中的加号按钮打开 *Create Menu Item* 窗口。

image:menu-create-item.png[align="center"]

支持创建下列类型的菜单项：

* *Menu* - 包含其他菜单项的菜单。菜单的属性详细信息请参阅 xref:flow-ui:menu-config.adoc#menu-attributes[MenuConfig]。
* *View* - 打开应用程序视图的菜单项。
* *Bean* - 调用 bean 方法的菜单项。
* *Class* - 调用类方法的菜单项。
// * *Separator* - 菜单项的水平分隔符。仅支持对顶层菜单项分隔。参阅 xref:ui:vcl/components/app-menu.adoc[AppMenu] 组件了解详情。

关于使用视图、Bean、类菜单项的更多信息，请参阅 `MenuConfig` 的 xref:flow-ui:menu-config.adoc#item-attributes[菜单项属性] 部分。

在打开视图的菜单项创建完成后，还支持配置一组 xref:flow-ui:menu-config.adoc#item-properties[属性] 用于传递参数给视图的公共 setter。

