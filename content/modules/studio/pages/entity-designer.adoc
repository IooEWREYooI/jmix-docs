= 实体设计器

Studio 提供一个可视化设计器，用于简化 xref:data-model:entities.adoc[实体] 的创建过程，因此，不需要记住实体创建的所有规则和注解。

include::subscription-note.adoc[]

使用 xref:studio:tool-window.adoc[Jmix 工具窗口] 中的菜单新建实体。

image::entity-tree.png[align="center"]

在弹出的对话框中输入实体名称并点击 *OK*。

image::entity-create.png[align="center"]

[[entity-editor]]
Studio 为新建的实体展示实体编辑器，其中有三个标签页（底部）：

* *Text* 包含实体的源代码。
* *Designer* 显示实体结构。这里可以为实体添加属性，设置实例名称、xref:data-model:entities.adoc#inheritance[继承] 策略和实体验证，这都是通过图形界面完成，不需要编写 Java 代码。
+
image::entity-designer.png[align="center"]
+
* *Indexes* 展示实体的索引，可以创建新索引。

[[adding-attributes]]
== 添加属性

可以点击 *Designer* 标签页中的 *+* 按钮添加属性，在弹出的对话框中配置属性。下面的示例中，添加了 *Attribute type* 为 `ASSOCIATION` 的 `addresses` 属性。这里，对于一对多 xref:data-model:entities.adoc#references[引用]，需要在 `Address` 实体中创建反向关联属性。

image::entity-association.png[align="center"]

*Name* 字段右侧的地球仪按钮可以支持设置属性的用户友好名称。名称保存在 `messages.properties` 文件中，UI 组件默认使用这里的名称。

image::entity-message.png[align="center"]

此外，在 *Text* 标签页时，通过点击顶部或 *Generate* 弹窗中的 *Add attribute* 按钮打开属性创建窗口。

image::entity-generate.png[align="center"]

[[creating-instance-name]]
== 创建实例名称

当为实体添加某个属性时，Studio 会自动为实体设置一个 xref:data-model:entities.adoc#instance-name[实例名称]，这个属性的名称需要是这些之一：`name`、`title`、`caption`、`label`、`summary`、`description`、`firstName`、`lastName`、`middleName`。

image::entity-instance-auto.png[align="center"]

当需要使用其他属性生成实例名称时，可以使用可视化构建器，通过点击 *Instance name* 字段的小铅笔按钮打开。

image::entity-instance-editor.png[align="center"]

实例名称也可以在 *Text* 标签页创建。将光标放置于类的名称上，按下 *Alt+Enter*（⌥↩）并选择 *Add instance name*。

image::entity-instance-text.png[align="center"]

[[enumerations]]
== 枚举

Studio 提供一组操作和可视化设计器，能帮助使用枚举。通过 *Jmix 工具窗口* 中的菜单项创建枚举。

image::entity-tree.png[align="center"]

当枚举创建完成后，会在编辑器打开枚举类，其中有两个标签页。

image::entity-enum-editor.png[align="center"]

* *Text* 包含源代码。
* *Designer* 展示枚举设计器，可以配置枚举类型和枚举值，使用图形化界面而无需编写 Java 代码。

在 *Values* 表格使用相关按钮设置枚举值常量。

* *Name* 列可以输入代码中使用的枚举常量名称。后续可以修改名称而不影响数据库已经存在的值。
* *Value* 列可以输入枚举常量的 id。这是存储在数据的实际值。

地球仪按钮可以用来为选中的枚举常量设置本地化名称。

设计器也支持修改枚举使用的 Id 类型，可以在 `String` 和 `Integer` 之间切换。Studio 会自动修复代码中使用的地方。然后，你可以修改枚举常量的值。

[NOTE]
====
这种自动迁移过程不会修改数据库表中已经保存的枚举值，需要手动修改。
====



