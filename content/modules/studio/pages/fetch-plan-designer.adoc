= Fetch Plan 设计器

Studio 提供可视化设计器用于管理 xref:data-access:fetching.adoc#fetch-plan[fetch plans]。

include::subscription-note.adoc[]

首先，需要使用 xref:studio:tool-window.adoc[Jmix 工具窗口] 的菜单项创建一个配置文件。

image::fetch-menu.png[align="center"]

会创建 `fetch-plans.xml` 文件并在设计器打开。*Structure* 标签页展示该配置文件中已经定义的 fetch plan，支持可视化地构建 fetch plan。

如需新建 fetch plan，可以使用 Jmix 工具窗口的 *New ->Advanced* 中的 *Fetch Plan* 菜单，或者使用 *Structure* 标签页的加号按钮。

image::fetch-edit.png[align="center"]

创建 fetch plan 的对话框包括下列字段：

* *Entity* - 实体名称，需要创建 fetch plan 的实体。
* *Name* - 新 fetch plan 的名称。
* *Extends* - 指定 xref:data-access:fetching.adoc#built-in-fetch-plans[内置的] 或自定义的 fetch plan，新建的 fetch plan 从这里继承属性。

当前实体的所有属性列表展示在字段下方的树中。可以在这里选择 fetch plan 要包含哪些属性。

如果你的 fetch plan 扩展了其他的 fetch plan，所有继承的属性都默认选中并且不可修改。当选中一个引用属性时，右侧面板中会展示下列属性：

image::fetch-extend.png[align="center"]

* *Fetch plan* - 用于加载引用实体的可选 fetch plan。我们建议使用命名的 fetch plan，这样更易于管理复杂的 fetch plan。
* *Fetch* - 引用属性的一个可选参数，指定如何从数据库加载关联实体。
+
** `AUTO` - 将根据关系类型选择最佳模式。
** `UNDEFINED` - 加载将根据 JPA 规则执行，实际是通过单独的 select 语句加载。
** `JOIN` - 通过 join 关联表在同一个 select 中加载。
** `BATCH` - 采用分批加载关联对象的方式进行优化。
+
如未指定该属性，则使用 `AUTO` 模式。
