= Дизайнер экранов

Дизайнер экранов представляет собой ряд панелей и окон инструментов, которые позволяют разрабатывать макет экрана и задавать свойства компонентов пользовательского интерфейса в стиле WYSIWYG. Редактор xref:ui:screens/descriptors.adoc[XML-дескрипторов] экранов интегрирован с Дизайнером экранов, поэтому XML-файл можно редактировать напрямую или использовать панели дизайнера для генерации кода.

include::subscription-note.adoc[]

Панель *Jmix UI* реализована как независимое окно инструментов IDE и отображается автоматически при открытии дескриптора экрана в редакторе.

Панель *Jmix UI* состоит из панели иерархии и панели инспектора.

image::screen-designer.png[align="center",width="1134"]

. Source Code Editor - редактор исходного кода
. Top Actions Panel - верхняя панель действий
. Layout Preview Panel - панель предварительного просмотра компоновки
. Jmix UI Hierarchy Panel - панель иерархии компонентов *Jmix UI*
. Jmix UI Inspector Panel - панель инспектора *Jmix UI*

[[layout-preview-panel]]
== Панель предварительного просмотра компоновки

Панель предварительного просмотра компоновки используется для отображения интерактивного схематического представления компоновки экрана. Оно разделяет пространство редактора вместе с исходным кодом дескриптора экрана.

image::screen-views.png[align="center",width="770"]

Используйте кнопки в правом верхнем углу редактора компоновки экрана.

. *Editor only* - в редакторе отображается только исходный код.
. *Editor and Preview* - пространство редактора разделено так, чтобы отображать и исходный код, и предварительный просмотр.
. *Preview only* - в редакторе отображается только предварительный просмотр.
. *Preview in Window* - исходный код отображается в редакторе, а предварительный просмотр отображается в отдельном окне.

Панель имеет несколько элементов управления, расположенных в правом верхнем углу:

image::screen-view-panel.png[align="center"]

* Выпадающий список *100% x 100%* позволяет выбрать фиксированный размер холста. Размер холста может быть больше размера панели предварительного просмотра, в этом случае добавляются дополнительные полосы прокрутки. Например, если вы разрабатываете сложный экран, содержащий множество элементов управления, и хотите открыть предварительный просмотр, вы можете выбрать размер холста 1920 x 1080 и посмотреть, как макет выглядит на большом экране.
* Кнопка *Refresh* перезагружает содержимое страницы предварительного просмотра.
* Кнопки *Zoom In*, *Zoom Out* и *Zoom Reset* изменяют масштаб страницы предварительного просмотра.

Кроме того, вы можете использовать элементы управления для изменения размера и выравнивания компонентов в компоновке:

image::screen-expand.png[align="center"]

[[component-palette]]
== Палитра компонентов

Вы можете открыть палитру компонентов, используя следующие способы:

* Нажмите на кнопку *Add component* на верхней панели действий:
+
image::add-component-method1.png[align="center",width="417"]

* Щелкните правой кнопкой мыши на пункте *Add Component* в контекстном меню панели иерархии *Jmix UI*:
+
image::add-component-method2.png[align="center",width="476"]

* Используя `⌘N` на MacOS или `Alt+Insert` на Windows и Linux, откройте меню *Generate*:
+
image::add-component-method3.png[align="center",width="696"]

Палитра компонентов отображает набор доступных элементов экрана: xref:ui:vcl/components.adoc[визуальные компоненты], xref:ui:vcl/containers.adoc[контейнеры], xref:ui:data-components.adoc[компоненты данных] - контейнеры и загрузчики, xref:ui:facets.adoc[фасеты], в том числе действия и настройки диалоговых окон.

image::screen-palette.png[align="center",width="487"]

Используйте поле поиска, чтобы найти необходимый компонент.

Если установленные в приложении дополнения имеют свои собственные компоненты, они будут отображены в палитре, например, в случае дополнения Charts:

image::screen-charts.png[align="center",width="487"]

Чтобы добавить компонент в макет, перетащите его из палитры в соответствующее место в исходном коде XML или на панель иерархии <<component-hierarchy,Jmix UI>>.

image::screen-move.gif[align="center"]

Щелкните правой кнопкой мыши по компоненту в палитре, чтобы открыть контекстное меню со следующими действиями:

* *Add to Design* - добавляет выбранный компонент на экран внутри выбранного элемента в иерархии.
* *Jmix Documentation* - открывает страницу документации компонента.

[[component-hierarchy]]
== Панель иерархии Jmix UI

На панели иерархии *Jmix UI* отображается дерево компонентов, добавленных в компоновку.

Вы можете перемещать элементы из палитры компонентов или изменять порядок элементов в дереве. Когда элемент выбран, на панели инспектора *Jmix UI* отображаются его свойства.

Щелкните правой кнопкой мыши по элементу, чтобы открыть его контекстное меню со следующими действиями:

image::screen-hierarchy.png[align="center",width="621"]

* *Add Component* открывает <<component-palette,палитру компонентов>>.
* *Generate handler* используется для генерации обработчика для компонента.
* *Inject to Controller* инжектирует компонент в контроллер экрана или переходит к существующему объявлению инжектирования.
* *Convert to* преобразует компонент в один из аналогичных альтернативных компонентов.
* *Wrap into* оборачивает компонент в один из предложенных контейнеров.
* *Go to XML* позволяет перейти к тегу XML в исходном коде.
* *Delete*, *Copy*, *Cut* или *Paste* удаляет, копирует, вырезает или вставляет элемент.
* *Jmix Documentation* открывает страницу документации выбранного компонента.

[[component-inspector]]
== Панель инспектора Jmix UI

На панели инспектора *Jmix UI* отображаются вкладки *Properties* и *Handlers*.

[[component-inspector-add-button]]
Для некоторых типов выбранных элементов отображается кнопка *+ Add*, которая позволяет добавить соответствующий подэлемент, например, действие таблицы, колонку, форматер, валидатор и так далее.

[[add-picker-action]]
* Чтобы добавить xref:ui:actions/standard-actions.adoc#picker-actions[действие поля выбора], выберите компонент выбора (xref:ui:vcl/components/entity-combo-box.adoc[EntityComboBox], xref:ui:vcl/components/entity-picker.adoc[EntityPicker], xref:ui:vcl/components/entity-suggestion-field.adoc[EntitySuggestionField], xref:ui:vcl/components/value-picker.adoc[ValuePicker]) в XML-дескрипторе экрана или на панели иерархии *Jmix UI* и нажмите *Add → Action* в панели инспектора *Jmix UI*. Появится диалоговое окно *Add Action*:
+
image::add-picker-action-dialog.png[align="center", width="492"]
+
Выберите какое-нибудь стандартное действие из списка.
+
Чтобы добавить пользовательское xref:ui:actions/declarative-actions.adoc[декларативное действие], выберите *New Custom Action* и нажмите *OK*. Появится диалоговое окно *Enter Action Id*:
+
image::action-id-dialog.png[align="center", width="343"]
+
Затем реализуйте пользовательскую логику в xref:ui:screens/screen-controllers.adoc[контроллере экрана], подписавшись на `Action.ActionPerformedEvent`.

[[add-action]]
* Чтобы добавить xref:ui:actions/standard-actions.adoc#list-actions[действие с коллекцией], выберите компонент `table` или `dataGrid` в XML-дескрипторе экрана или на панели иерархии *Jmix UI* и нажмите *Add → Action* в панели инспектора *Jmix UI*. Появится диалоговое окно *Add Action*:
+
image::add-action-dialog.png[align="center", width="492"]
+
Если флажок *Create Button for selected actions* установлен, Jmix Studio создаст кнопку в контейнере `buttonsPanel`, связанную с добавляемым действием.

[[add-column]]
* Чтобы добавить `column`, выберите элемент `columns` в XML-дескрипторе экрана или на панели иерархии *Jmix UI* и нажмите *Add → Column* на панели инспектора *Jmix UI*. Появится диалоговое окно *Add Column*:
+
image::add-column-dialog.png[align="center", width="386"]
+
Этот список содержит свойства, которые включены в xref:data-access:fetching.adoc#fetch-plan[фетч-план], но еще не отображены компонентом `table`.
+
Чтобы добавить xref:ui:vcl/components/data-grid.adoc#data-grid-column-generation[генерируемую колонку], выберите *New Custom Column* и нажмите *OK*. Появится диалоговое окно *Column generator*:
+
image::column-generator.png[align="center", width="431"]
+
Выберите генерируемый тип из списка, предложенного Studio, и соответствующий тип xref:ui:vcl/components/data-grid.adoc#renderers[рендерера].
+
Studio добавит сгенерированную колонку в таблицу в XML-дескриптор и метод-обработчик в контроллер экрана.

[[properties-tab]]
=== Вкладка Properties

Вкладка *Properties* показывает атрибуты выбранного элемента экрана и позволяет их редактировать.

image::screen-properties.png[align="center",width="340"]

Используйте поле поиска, чтобы найти необходимый атрибут.

Атрибуты по умолчанию упорядочены по имени. В первой колонке перечислены имена атрибутов для выбранного компонента. Во второй колонке на вкладке *Properties* отображаются значения свойств следующим образом:

*  Когда свойство выбрано, значение сменяется полем редактирования, в котором можно ввести новое значение.
+
image::text-values.gif[align="center"]

* Если значение представляет собой список, при выборе свойства появляется кнопка image:moveDown.png[Move down] выпадающего списка.
+
image::list-values.gif[align="center"]

* Если значение является логическим, его можно изменить с помощью флажка:
+
image::boolean-values.gif[align="center"]

[[localized-message-dialog]]
* Такие свойства, как xref:ui:vcl/xml.adoc#caption[caption], xref:ui:vcl/xml.adoc#description[description], xref:ui:vcl/xml.adoc#context-help-text[contextHelpText], имеют возможность задавать xref:localization:index.adoc[локализованные] имена. Нажмите кнопку image:main-message-pack.png[Globe], чтобы открыть диалоговое окно, в котором можно задать локализованное сообщение для атрибута.
+
image::message-values.gif[align="center",width="500"]

[[style-name-editor]]
* Нажмите кнопку image:plus-button.png[Plus] для свойства the xref:ui:vcl/xml.adoc#stylename[stylename], чтобы открыть диалоговое окно *Style Name Editor*:
+
image::style-name-editor.png[align="center"]
+
По умолчанию имена стилей упорядочены по имени компонента или контейнера.

[[icon-editor]]
* Нажмите кнопку image:edit.png[Edit] для свойства xref:ui:vcl/xml.adoc#icon[icon], чтобы открыть диалоговое окно *Choose icon*:
+
image::choose-icon-dialog.png[align="center"]
+
** Вкладка *JMIX ICONS* содержит значки из набора значков `JmixIcon` по умолчанию. Он включает в себя почти полный набор значков `FontAwesome` и значки, специфичные для Jmix.
** Вкладка *FONT AWESOME* содержит значки из набора значков шрифтов `FontAwesome`.
** Вкладка *ICON SET* содержит значки из xref:ui:icons/icon-sets.adoc[пользовательских наборов значков].
** Вкладка *APPLICATION ICONS* содержит значки из источников xref:ui:themes.adoc[темы].

[[handlers-tab]]
=== Вкладка Handlers

На вкладке *Handlers* отображаются слушатели событий и делегаты компонентов, которые могут быть связаны с выбранным компонентом. Чтобы сгенерировать необходимый метод слушателя, просто дважды щелкните соответствующую строку.

image::screen-handlers.png[align="center",width="323"]

Вы будете перенаправлены на xref:ui:screens/screen-controllers.adoc[контроллер экрана] с фрагментом кода.

[[top-actions-panel]]
== Верхняя панель действий

Панель действий расположена в верхней части редактора исходного кода. Она предоставляет доступ к следующим действиям:

* *Controller* - переходит к контроллеру экрана.
* `<entity class name>` - отображается, если экран представляет собой браузер или редактор сущности и позволяет перейти к сущности, связанной с текущим экраном.
* *Add Component* - открывает палитру компонентов:

image::screen-top-panel.png[align="center",width="784"]

Кроме того, вы можете переключаться между дескриптором и контроллером экрана с помощью маркера на поле слева.
