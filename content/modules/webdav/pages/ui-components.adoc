= UI Components

[[webdav-document-link]]
== WebdavDocumentLink

`WebdavDocumentLink` is a UI component that provides the functionality of reading and editing documents using Microsoft Office/LibreOffice Apps. Also, if versioning is supported for a document, a user can see all versions of a document.

image::ui-webdav-document-link.png[]

The component has the following functionality:

* Opening the latest version of a document for reading/editing.
* Opening preceding document versions in read-only mode (for more details, see xref:webdav:features.adoc#web-dav-document-versions[WebDAV Document Versions]).

To create `WebdavDocumentLink`, use the `UiComponents` factory.

As an example, consider creating a xref:backoffice-ui:vcl/components/table.adoc#table-column-generation[generated] `docLink` column for the `Contract` table.

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/webdav/ex1/screen/contract/contract-browse.xml[tags=contracts-table-start;columns;contracts-table-end]
----

You can create the `columnGenerator` handler for a table column using Studio and implement it as follows:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/webdav/ex1/screen/contract/ContractBrowse.java[tags=ui-components;column-generator]
----

<1> After obtaining a `WebdavDocumentLink` instance, it requires configuring. The `withWebdavDocument()` method requires specifying a document.
<2> Using the `setIsShowVersion()` method, you can manage the version link visibility. The default value of this parameter depends on versioning: if it is enabled for a document, then a link is shown.

== WebdavDocumentVersionLink

`WebdavDocumentVersionLink` is a UI component that enables opening a particular document version using Microsoft Office/LibreOffice Apps in the read-only mode. The component displays a file name of a certain document version.

image::ui-webdav-document-version-link.png[]

To create `WebdavDocumentVersionLink`, use the `UiComponents` factory.

[source,java,indent=0]
----
WebdavDocumentVersionLink webdavDocumentVersionLink = uiComponents.create(WebdavDocumentVersionLink.class);
webdavDocumentVersionLink.setWebdavDocumentVersion(documentVersion);
----

[[webdav-document-upload-field]]
== WebdavDocumentUploadField

`WebdavDocumentUploadField` is a UI component that is designed to work with documents.

Component XML name: `webdavDocumentUpload`.

The component has the following functionality:

* Uploading a file to create a new document or a document version.
* Opening a document for reading/editing.
* Downloading the latest or preceding document versions.
* Creating new document versions based on previous ones.

=== Work Modes

The component works in the following two modes:

* If versioning is enabled, `WebdavDocumentUploadField` is displayed without any restrictions.
* If versioning is disabled, `WebdavDocumentUploadField` does not show a link to the latest document version.

=== Declarative Creation

To use the `WebdavDocumentUploadField` component in XML, specify the `\http://jmix.io/schema/webdav/ui` scheme file in the required screen descriptor. During this step, it is important to specify the name of a namespace where component tags are stored, for example, `xmlns:webdav="http://jmix.io/schema/webdav/ui"`. In the example below, the namespace is determined by the word `webdav`.

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/webdav/ex1/screen/contract/contract-edit.xml[tags=descriptor-start;layout-start;form-start;webdav-document-upload;form-end;layout-end;descriptor-end]
----

==== Attributes

`WebdavDocumentUploadField` is inherited from `SingleFileUploadField` and contains all parent properties.

xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#accept[accept] -
xref:backoffice-ui:vcl/xml.adoc#align[align] -
xref:backoffice-ui:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:backoffice-ui:vcl/xml.adoc#buffered[buffered] -
xref:backoffice-ui:vcl/xml.adoc#caption[caption] -
xref:backoffice-ui:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#clear-button-caption[clearButtonCaption] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#clear-button-description[clearButtonDescription] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#clear-button-icon[clearButtonIcon] -
xref:backoffice-ui:vcl/xml.adoc#colspan[colspan] -
xref:backoffice-ui:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:backoffice-ui:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextEnabled] -
xref:backoffice-ui:vcl/xml.adoc#css[css] -
xref:backoffice-ui:vcl/xml.adoc#data-container[dataContainer] -
xref:backoffice-ui:vcl/xml.adoc#description[description] -
xref:backoffice-ui:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#drop-zone[dropZone] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#drop-zone-prompt[dropZonePrompt] -
xref:backoffice-ui:vcl/xml.adoc#editable[editable] -
xref:backoffice-ui:vcl/xml.adoc#enable[enable] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#file-size-limit[fileSizeLimit]
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#file-storage[fileStorage] -
xref:backoffice-ui:vcl/xml.adoc#height[height] -
xref:backoffice-ui:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:backoffice-ui:vcl/xml.adoc#icon[icon] -
xref:backoffice-ui:vcl/xml.adoc#id[id] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#paste-zone[pasteZone]
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#permitted-extensions[permittedExtensions] -
xref:backoffice-ui:vcl/xml.adoc#property[property] -
xref:backoffice-ui:vcl/xml.adoc#required[required] -
xref:backoffice-ui:vcl/xml.adoc#required-message[requiredMessage] -
xref:backoffice-ui:vcl/xml.adoc#responsive[responsive] -
xref:backoffice-ui:vcl/xml.adoc#rowspan[rowspan] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#show-clear-button[showClearButton] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#show-file-name[showFileName]
xref:backoffice-ui:vcl/xml.adoc#stylename[stylename] -
xref:backoffice-ui:vcl/xml.adoc#tab-index[tabIndex] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#upload-button-caption[uploadButtonCaption] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#upload-button-description[uploadButtonDescription] -
xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc#upload-button-icon[uploadButtonIcon] -
xref:backoffice-ui:vcl/xml.adoc#visible[visible] -
xref:backoffice-ui:vcl/xml.adoc#width[width]

=== Manual Creation

API for `WebdavDocumentUploadField` is similar to API for xref:backoffice-ui:vcl/components/file-storage-upload-field.adoc[FileStorageUploadField].

== Using WebDAV in FileMultiUploadField

The add-on does not contain a UI component similar to xref:backoffice-ui:vcl/components/file-multi-upload-field.adoc[FileMultiUploadField]. However, it is possible to support this functionality. See the example below:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/webdav/ex1/screen/multiupload/ScreenWithMultiUploadField.java[tags=autowired;on-init]
----
<1> Save file to FileStorage.
<2> Create and save `WebdavDocument`.