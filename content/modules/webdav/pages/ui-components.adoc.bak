= UI 组件

[[webdav-document-link]]
== WebdavDocumentLink

`WebdavDocumentLink` 是一个 UI 组件，支持用户在桌面 office 应用程序中打开文档。另外，如果文档具有版本，则用户可以看到文档的所有版本。

image::ui-webdav-document-link.png[]

组件有下列功能：

* 打开文档的最新版本进行阅读或编辑。
* 以只读模式打开文档的之前版本（参阅 xref:webdav:features.adoc#web-dav-document-versions[WebDAV 文档版本]）。

下面示例中，为表格组件的 xref:ui:vcl/components/table.adoc#table-column-generation[生成] 列创建了 `WebdavDocumentLink` 组件：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/webdav/ex1/screen/contract/contract-browse.xml[tags=contracts-table-start;columns;contracts-table-end]
----

`columnGenerator` 处理器创建并返回 `WebdavDocumentLink` 组件：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/webdav/ex1/screen/contract/ContractBrowse.java[tags=ui-components;column-generator]
----

<1> `withWebdavDocument()` 方法接收文档实例作为参数，用于生成链接。
<2> 使用 `setIsShowVersion()` 方法可以设置是否显示版本链接。默认情况下，如果文档有版本功能，则会展示版本链接。

[[webdav-document-version-link]]
== WebdavDocumentVersionLink

`WebdavDocumentVersionLink` 支持以只读方式在桌面 Office 软件打开特定的文档版本。组件展示特定文档版本的文件名。

image::ui-webdav-document-version-link.png[]

用 `UiComponents` 工厂创建 `WebdavDocumentVersionLink`。

[source,java,indent=0]
----
WebdavDocumentVersionLink webdavDocumentVersionLink =
    uiComponents.create(WebdavDocumentVersionLink.class);
webdavDocumentVersionLink.setWebdavDocumentVersion(documentVersion);
----

[[webdav-document-upload-field]]
== WebdavDocumentUploadField

`WebdavDocumentUploadField` 用于处理文件。

组件的 XML 名称：`webdavDocumentUpload`。

组件有下列功能：

* 上传文档创建一个新的文档或者一个新的文档版本。
* 打开文档阅读或编辑。
* 下载最新或之前的文档版本。
* 基于之前的文档创建新的文档版本。

=== 工作模式

组件有下列工作模式：

* 如果启用了版本功能，`WebdavDocumentUploadField` 正常展示。
* 如果未启用版本功能，`WebdavDocumentUploadField` 不会展示最新文档版本的链接。

=== 声明式创建

如需在界面 XML 中创建 `WebdavDocumentUploadField` 组件，首先添加 `\http://jmix.io/schema/webdav/ui` 命名空间。然后使用该命名空间中的组件元素，示例：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/webdav/ex1/screen/contract/contract-edit.xml[tags=descriptor-start;layout-start;form-start;webdav-document-upload;form-end;layout-end;descriptor-end]
----

`WebdavDocumentUploadField` 继承自 `SingleFileUploadField`，因此也有下列属性：

xref:ui:vcl/components/file-storage-upload-field.adoc#accept[accept] -
xref:ui:vcl/xml.adoc#align[align] -
xref:ui:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:ui:vcl/xml.adoc#buffered[buffered] -
xref:ui:vcl/xml.adoc#caption[caption] -
xref:ui:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:ui:vcl/components/file-storage-upload-field.adoc#clear-button-caption[clearButtonCaption] -
xref:ui:vcl/components/file-storage-upload-field.adoc#clear-button-description[clearButtonDescription] -
xref:ui:vcl/components/file-storage-upload-field.adoc#clear-button-icon[clearButtonIcon] -
xref:ui:vcl/xml.adoc#colspan[colspan] -
xref:ui:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:ui:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextEnabled] -
xref:ui:vcl/xml.adoc#css[css] -
xref:ui:vcl/xml.adoc#data-container[dataContainer] -
xref:ui:vcl/xml.adoc#description[description] -
xref:ui:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:ui:vcl/components/file-storage-upload-field.adoc#drop-zone[dropZone] -
xref:ui:vcl/components/file-storage-upload-field.adoc#drop-zone-prompt[dropZonePrompt] -
xref:ui:vcl/xml.adoc#editable[editable] -
xref:ui:vcl/xml.adoc#enable[enable] -
xref:ui:vcl/components/file-storage-upload-field.adoc#file-size-limit[fileSizeLimit]
xref:ui:vcl/components/file-storage-upload-field.adoc#file-storage[fileStorage] -
xref:ui:vcl/xml.adoc#height[height] -
xref:ui:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:ui:vcl/xml.adoc#icon[icon] -
xref:ui:vcl/xml.adoc#id[id] -
xref:ui:vcl/components/file-storage-upload-field.adoc#paste-zone[pasteZone]
xref:ui:vcl/components/file-storage-upload-field.adoc#permitted-extensions[permittedExtensions] -
xref:ui:vcl/xml.adoc#property[property] -
xref:ui:vcl/xml.adoc#required[required] -
xref:ui:vcl/xml.adoc#required-message[requiredMessage] -
xref:ui:vcl/xml.adoc#responsive[responsive] -
xref:ui:vcl/xml.adoc#rowspan[rowspan] -
xref:ui:vcl/components/file-storage-upload-field.adoc#show-clear-button[showClearButton] -
xref:ui:vcl/components/file-storage-upload-field.adoc#show-file-name[showFileName]
xref:ui:vcl/xml.adoc#stylename[stylename] -
xref:ui:vcl/xml.adoc#tab-index[tabIndex] -
xref:ui:vcl/components/file-storage-upload-field.adoc#upload-button-caption[uploadButtonCaption] -
xref:ui:vcl/components/file-storage-upload-field.adoc#upload-button-description[uploadButtonDescription] -
xref:ui:vcl/components/file-storage-upload-field.adoc#upload-button-icon[uploadButtonIcon] -
xref:ui:vcl/xml.adoc#visible[visible] -
xref:ui:vcl/xml.adoc#width[width]

=== 编程式用法

`WebdavDocumentUploadField` 的 API 与 xref:ui:vcl/components/file-storage-upload-field.adoc[FileStorageUploadField] 类似。

[[using-filemultiuploadfield]]
== 使用 FileMultiUploadField

下面示例展示如何使用通过 xref:ui:vcl/components/file-multi-upload-field.adoc[FileMultiUploadField] 上传的文件创建 WebDAV 文档：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/webdav/ex1/screen/multiupload/ScreenWithMultiUploadField.java[tags=autowired;on-init]
----
<1> 文件保存至文件存储。
<2> 创建并保存 `WebdavDocument`。
