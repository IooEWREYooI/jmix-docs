= 实体数据任务

当需要操作实体时，使用实体数据任务比使用服务任务更加便捷。支持从数据库加载实体，编辑实体以及创建新实体。

[[loading-entities]]
== 加载实体

如需加载实体，需要再属性面板中选择相应的任务类型。建模器提供 JPQL 编辑器用于输入查询代码。查询的结果将写入指定的流程变量中，但是结果的类型并不能预先确定。如果结果包含多个元素，可以在 *Save result as（结果另存为）* 字段选择 `Collection（集合）`。

image::data-task/load-entity.png[align="center"]

如果结果包含多个元素，但是选择了 *Single element（单一）*，则第一个元素会被写入指定的流程变量。

[[modifying-entities]]
== 编辑实体

可以编辑已经写入流程变量中的实体。会自动检测实体类型，支持对所有非系统属性进行修改。

image::data-task/modify-entity.png[align="center"]

另外，也可以直接输入名称指定流程变量。此方法可以用在当 <<loading-entities,加载实体>> 的结果为单一实体且已经写入流程变量时。然后需要显式地定义实体类型继而指定实体属性。

[[specifying-attributes]]
=== 设置属性

属性值可以通过下列方式之一进行设置：

* 在控件中直接输入值。
+
image::data-task/direct-value.png[align="center"]
+
* 指定一个表达式。
+
image::data-task/expression.png[align="center"]
+
* 使用 Spring bean。该方法默认禁用，设置下列应用程序属性启用：
+
[source,properties,indent=0]
----
include::example$/ex1/src/main/resources/application.properties[tags=spring-bean-enable]
----
+
image::data-task/spring-bean.png[align="center"]

[[creating-entities]]
== 新建实体

如需创建新实体，从列表中选择实体名称并指定新实体将写入的流程变量名。可视化设计器中支持指定所有非系统属性。

image::data-task/create-entity.png[align="center"]

设定属性值的方法如 <<specifying-attributes,上面>> 所述。

