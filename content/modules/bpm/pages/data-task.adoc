= Задача данных сущности

Если вы хотите манипулировать сущностями, может быть удобно использовать Entity Data Task вместо Service Task. Вы можете загружать объекты из базы данных, изменять их и создавать новые.

[[loading-entities]]
== Загрузка объектов

Для загрузки сущностей необходимо выбрать тип задачи на панели свойств. Разработчик моделей предоставляет редактор JPQL для ввода кода. Результат запроса будет записан в указанную переменную процесса, но тип результата заранее неизвестен. Если вы ожидаете, что результат будет содержать несколько элементов, выберите `Collection` в поле *Сохранить результат как*.

image::data-task/load-entity.png[align="center"]

Если результат содержит несколько элементов и выбран *Один элемент*, то в указанную переменную процесса будет записан самый первый элемент.

[[modifying-entities]]
== Изменение объектов

Вы можете изменить сущность, записанную в одной из существующих переменных процесса. Тип объекта будет определен автоматически, и все несистемные атрибуты будут доступны для изменения.

image::data-task/modify-entity.png[align="center"]

Кроме того, вы можете указать имя переменной процесса напрямую, введя его имя. Это важно, когда результатом <<loading-entities,загрузки объектов>> является объект, который был записан в переменную процесса. После этого необходимо явно определить тип сущности и перейти к указанию атрибутов сущности.

[[specifying-attributes]]
=== Указание атрибутов

Значение атрибута может быть указано одним из следующих способов:

* Указание прямого значения путем ввода в поле.
+
image::data-task/direct-value.png[align="center"]
+
* Указание выражения.
+
image::data-task/expression.png[align="center"]
+
* Использование бина Spring. По умолчанию эта опция отключена. Чтобы включить этот вариант в список, установите свойство:
+
[source,properties,indent=0]
----
include::example$/ex1/src/main/resources/application.properties[tags=spring-bean-enable]
----
+
image::data-task/spring-bean.png[align="center"]

[[creating-entities]]
== Создание объектов

Чтобы создать сущность, выберите имя сущности из списка и укажите имя переменной процесса, в которую будет записана новая сущность. Все несистемные атрибуты будут доступны для указания с помощью визуального редактора.

image::data-task/create-entity.png[align="center"]

Варианты определения значений описаны <<specifying-attributes, выше>>.

