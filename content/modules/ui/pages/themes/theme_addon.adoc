= 创建和使用主题扩展组件
:page-aliases: backoffice-ui:themes/theme_addon.adoc

主题扩展组件，其实是一组用于主题编译的 SCSS 文件。

必须满足下列条件：

* JAR 文件包含 `VAADIN/addons/<addon-name>` 目录结构。
* `VAADIN/addons/<addon-name>` 目录中存在 `<addon-name>.scss` 文件。
* `<addon-name>.scss` 文件中，定义 `<addon-name>` mixin。
* JAR 文件的 Manifest 包含 *Vaadin-Stylesheets* 键值：
+
[source, mf,indent=0]
----
jar.manifest {
attributes(['Vaadin-Stylesheets': 'VAADIN/addons/<addon-name>/<addon-name>.scss'])
}
----

所有这种 JAR 都会在编译主题时被用到。

你无需在扩展组件中编译主题。如果需要，可以在扩展组件项目中创建一个额外的 demo 模块。

== 使用 Studio 创建主题扩展组件

按下列步骤使用 Jmix Studio 创建主题扩展组件：

. 新建项目，选择 *theme-addon* 模板。输入项目名称，例如，`"themeaddon"`，将创建一个简单的 Java 项目，结构如下：
+
image::themes/structure-add-on.png[align="center"]
. 打开 `themeaddon.scss` 文件并在 `themeaddon` mixin 中定义你的改动，示例：
+
[source, css,indent=0]
----
@mixin themeaddon {
   .jmix-sidemenu-panel
   .jmix-sidemenu-item
   .jmix-sidemenu-item-caption {
      font-size: 16px;
   }

   .v-button:not(.v-button-link) {
      background-image: none;
      background-color: #13418D;
   }
}
----
. 用下列命令构建并发布至本地 maven 仓库：
+
.Windows:
[source, code,indent=0]
----
gradlew clean assemble publishToMavenLocal
----
+
.Linux & macOS:
[source, code,indent=0]
----
./gradlew clean assemble publishToMavenLocal
----

== 使用主题扩展组件

. 打开需要使用主题扩展组件的项目。
. 创建一个 xref:themes/custom_theme.adoc[自定义主题]。
. 打开 `build.gradle` 文件，并做如下修改：
* 将 `mavenLocal()` 添加至仓库列表；
* 添加组件的依赖：
+
[source, gradle,indent=0]
----
implementation 'com.company:themeaddon:0.0.1-SNAPSHOT'
----
. 重新加载项目。
