= Уведомления

++++
<div class="backoffice-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=notification-type" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Уведомления представляют собой небольшие окна, всплывающие в центре или в углу главного окна приложения. Они используются для информирования пользователей о действиях, процессах и событиях в приложении.

Уведомления могут исчезать автоматически, или когда пользователь щелкает по экрану или нажимает Esc.

Для того чтобы показать уведомление, необходимо инжектировать в контроллер экрана интерфейс `Notifications` и воспользоваться его fluent API. В примере ниже уведомление показывается, когда пользователь щелкает по кнопке:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/dialogs/DialogsScreen.java[tags=inject-notifications;create-simple-notification]
----

[[text-content]]
== Текстовое содержание

Используйте метод `withCaption()`, чтобы задать заголовок уведомления. Вы можете взять локализованные сообщения из основного пакета сообщений.

Уведомление может иметь дополнительное описание, которое показывается под заголовком более мелким шрифтом. Используйте метод `withDescription()`,чтобы передать текст описания.

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/dialogs/DialogsScreen.java[tags=inject-notifications;create-simple-notification-desc]
----

Используя метод `withContentMode()`, можно определить, как должен отображаться текст сообщения. Существует три предопределенных режима:

* `ContentMode.TEXT` - текстовые значения отображаются в виде обычного текста. Значение по умолчанию.

* `ContentMode.PREFORMATTED` - текстовые значения отображаются в виде предварительно отформатированного текста. В этом режиме новые строки сохраняются при отображении на экран. `ContentMode.PREFORMATTED` не поддерживается для уведомлений.

* `ContentMode.HTML` - текстовые значения интерпретируются и отображаются как HTML. При использовании HTML обязательно экранируйте данные во избежание инжекции вредоносного кода.

В тексте можно использовать символы `\n` для перевода строк. Для отображения HTML необходимо передать параметр `ContentMode.HTML` в метод `withContentMode()`.

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/dialogs/DialogsScreen.java[tags=inject-notifications;create-simple-notification-content]
----

Вы можете передать значение `true` в метод `withHtmlSanitizer()`, чтобы сделать доступной санитизацию HTML для содержимого уведомления. В этом случае параметр `ContentMode.HTML` должен быть передан в метод `withContentMode().`

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/dialogs/DialogsScreen.java[tags=inject-notifications;unsafe-html;create-simple-notification-sanitize]
----

Значение, переданное в метод `withHtmlSanitizer()`, имеет приоритет над значением глобального свойства xref:app-properties.adoc#jmix-ui-component-html-sanitizer-enabled[jmix.ui.component.htmlSanitizerEnabled].

[[notification-type]]
== Тип уведомления

Уведомления могут быть следующих типов:

* `TRAY` - уведомление показывается в правом нижнем углу приложения и исчезает автоматически.
+
image::notifications/tray.png[align="center"]

* `HUMANIZED` - стандартное уведомление в центре экрана, исчезает автоматически.
+
image::notifications/humanized.png[align="center"]

* `WARNING` - предупреждение. Исчезает при щелчке по экрану.
+
image::notifications/warning.png[align="center"]

* `ERROR` - уведомление об ошибке. Исчезает при щелчке по экрану.
+
image::notifications/error.png[align="center"]

* `SYSTEM` - системное уведомление. Исчезает при щелчке по уведомлению.
+
image::notifications/system.png[align="center"]

Тип по умолчанию – `HUMANIZED`. Другой тип можно указать в параметре метода `create()`:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/dialogs/DialogsScreen.java[tags=inject-notifications;create-simple-notification-tray]
----

[[position]]
== Расположение

Вы можете установить положение окна уведомления, используя метод `withPosition()`. Стандартные значения:

* `DEFAULT`
* `TOP_RIGHT`
* `TOP_LEFT`
* `TOP_CENTER`
* `MIDDLE_RIGHT`
* `MIDDLE_LEFT`
* `MIDDLE_CENTER`
* `BOTTOM_RIGHT`
* `BOTTOM_LEFT`
* `BOTTOM_CENTER`

[[delay]]
== Задержка

Уведомления с типами `TRAY`, `HUMANIZED` по умолчанию остаются на экране в течение 3 секунд.

Уведомления с типами `WARNING`, `ERROR`, и `SYSTEM` исчезают по клику пользователем на сообщение.

Вы можете установить задержку в миллисекундах до исчезновения уведомления, используя метод `withHideDelayMs()`. Значение `-1` отключает автоматическое исчезновение, чтобы потребовать от пользователя щелкнуть сообщение.

[[styling]]
== Стили

Используя метод `withStyleName()`, вы можете задать свое имя CSS стиля для уведомления. Подробнее см. в разделе xref:themes/custom_theme.adoc#creating-new-styles[].