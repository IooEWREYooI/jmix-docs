= PopupButton
:page-aliases: backoffice-ui:vcl/components/popup-button.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=popupbutton-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`PopupButton - 弹窗按钮` 是一个带弹窗的按钮。弹窗中可以包含操作列表或自定义内容。

组件的 XML 名称：`popupButton`。

image::vcl/components/popup-button.gif[align="center"]

[[basics]]
== 基本用法

`PopupButton` 支持用 `caption` 属性指定按钮名称，用 `icon` 属性指定按钮图标，用 `description` 属性定义提示文字。下图显示了不同类型的按钮：

image::vcl/components/popup-buttons.png[align="center"]

[[elements]]
== XML 元素

[[actions]]
=== actions

该元素指定下拉列表内的操作。

操作的属性中只有 `caption`、`enable`、`visible` 能起作用。`description` 和 `shortcut` 属性会被忽略。`icon` 属性的处理取方式决于组件的 `showActionIcons` 属性。默认 `showActionIcons=false`。

下面是一个 `PopupButton` 示例，其中包含一个具有两个操作的下拉列表：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/popupbutton/popup-button-screen.xml[tags=popup-button]
----

image::vcl/components/popup-icons.png[align="center"]

[TIP]
====
如需在 Jmix Studio 中添加操作，可以在界面 XML 或者 *Component Hierarchy* 面板中选择 `PopupButton` 组件，然后点击 *Component Inspector* 面板的 xref:studio:screen-designer.adoc#component-inspector-add-button[Add]*->Action* 按钮。
====

可以定义新的操作，也可以使用当前界面中任意元素已定义的操作。下面例子中，`personsPopupButton` 组件使用了 `personsTable` 中定义的操作：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/popupbutton/popup-button-screen.xml[tags=persons-popup-button]
----

[[popup]]
=== popup

该元素为 `PopupButton` 弹窗设置自定义的内容。如果设置了自定义弹出内容，则会忽略操作。

下面是自定义弹出布局的示例：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/popupbutton/popup-button-screen.xml[tags=custom-popup-button]
----

image::vcl/components/custom-popup-button.gif[align="center"]

[[attributes]]
== 属性

[[auto-close]]
* `autoClose` - 定义是否应在操作触发后自动关闭弹窗。

[[close-popup-on-outside-click]]
* `closePopupOnOutsideClick` - 如果设置为 `true`，则单击弹窗外部时将其关闭。这不会影响单击按钮本身的行为。

[[menu-width]]
* `menuWidth` - 设置弹窗宽度。

[[show-action-icons]]
* `showActionIcons` - 显示操作按钮的图标。

[[toggle-popup-visibility-on-click]]
* `togglePopupVisibilityOnClick` - 定义在弹窗上连续点击是否切换弹窗可见性。

[[popup-open-direction]]
* `popupOpenDirection` - 设置弹窗的打开方向。可能值：
** `BOTTOM_LEFT`
** `BOTTOM_RIGHT`
** `BOTTOM_CENTER`

[[popup-visibility]]
== 跟踪弹窗可见性

也可以通过订阅相应事件来跟踪 `PopupButton` 的可见性状态变更：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/popupbutton/PopupButtonScreen.java[tags=event]
----

另外，也可以使用组件的 API 添加事件监听器，示例：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/popupbutton/PopupButtonScreen.java[tags=listener]
----

[[appearance]]
== 样式

//todo add a link to theme extension
`PopupButton` 的外观可以使用带 `$jmix-popupbutton-*` 前缀的 SCSS 变量进行自定义。在创建了 xref:themes/custom_theme.adoc[自定义主题] 之后，可以在可视化编辑器中修改这些变量。

[[xml]]
== XML 属性

xref:vcl/xml.adoc#align[align] -
<<auto-close, autoClose>> -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
<<close-popup-on-outside-click, closePopupOnOutsideClick>> -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<menu-width, menuWidth>> -
<<popup-open-direction, popupOpenDirection>> -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<show-action-icons, showActionIcons>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#tab-index[tabIndex] -
<<toggle-popup-visibility-on-click, togglePopupVisibilityOnClick>> -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]
