= PopupButton

++++
<div class="backoffice-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=popupbutton-simple" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

`PopupButton` – это xref:vcl/components/button.adoc[кнопка] с выпадающим меню. Меню может содержать список действий или отображать собственное содержимое.

XML-имя компонента: `popupButton`.

image::vcl/components/popup-button.gif[align="center"]

[[basics]]
== Основы

Кнопка `PopupButton` может содержать текст, заданный с помощью атрибута `caption`, или значок `icon` (или и то, и другое). Всплывающую подсказку можно задать с помощью атрибута `description`. На изображении ниже показаны разные виды кнопок:

image::vcl/components/popup-buttons.png[align="center"]

[[elements]]
== Элементы

[[actions]]
=== actions

Данный элемент определяет выпадающий список действий.

Отображаются только следующие свойства действий: `caption`, `enable`, `visible`. Свойства `description` и `shortcut` игнорируются. Обработка свойства `icon` зависит от атрибута `showActionIcons` компонента. По умолчанию `showActionIcons=false`.

Пример кнопки с выпадающим списком, содержащим два действия:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/popupbutton/popup-button-screen.xml[tags=popup-button]
----

image::vcl/components/popup-icons.png[align="center"]

Действия для `PopupButton` можно как создать с нуля, так и использовать действия, уже созданные для какого-либо элемента в данном экране. В примере ниже компонент `personsPopupButton` использует действия, определенные в `personsTable`:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/popupbutton/popup-button-screen.xml[tags=persons-popup-button]
----

[[popup]]
=== popup

Данный элемент позволяет создать собственное содержимое всплывающего меню. Если оно задано, элемент `actions` игнорируется.

Пример кнопки с собственным содержимым:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/popupbutton/popup-button-screen.xml[tags=custom-popup-button]
----

image::vcl/components/custom-popup-button.gif[align="center"]

[[attributes]]
== Атрибуты

[[auto-close]]
* `autoClose` - определяет, должно ли всплывающее меню закрываться автоматически после вызова действия.

[[close-popup-on-outside-click]]
* `closePopupOnOutsideClick` - если установлено значение `true`, щелчок по области за пределами всплывающего меню закрывает его. Это не относится к щелчкам по самой кнопке компонента.

[[menu-width]]
* `menuWidth` - устанавливает ширину всплывающего меню.

[[show-action-icons]]
* `showActionIcons` - разрешает отображение значков для кнопок действий.

[[toggle-popup-visibility-on-click]]
* `togglePopupVisibilityOnClick` - определяет, должны ли последовательные щелчки по кнопке компонента изменять видимость всплывающего меню.

[[popup-open-direction]]
* `popupOpenDirection` - задает направление открытия всплывающего окна. Возможные значения:
** `BOTTOM_LEFT`
** `BOTTOM_RIGHT`
** `BOTTOM_CENTER`

[[popup-visibility]]
== Отслеживание изменения видимости

Изменение видимости всплывающего меню можно отслеживать, подписавшись на соответсвующее событие:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/popupbutton/PopupButtonScreen.java[tags=event]
----

Также можно создать слушателя этого события, используя API компонента, например:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/popupbutton/PopupButtonScreen.java[tags=listener]
----

[[appearance]]
== Внешний вид

//todo add a link to theme extension
Внешний вид компонента `PopupButton` можно настроить с помощью переменных SCSS с префиксом `$jmix-popupbutton-*`. Эти переменные можно изменить в визуальном редакторе после расширения темы или создания xref:themes/custom_theme.adoc[новой темы].

[[xml]]
== Все XML-атрибуты

xref:vcl/xml.adoc#align[align] -
<<auto-close, autoClose>> -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
<<close-popup-on-outside-click, closePopupOnOutsideClick>> -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<menu-width, menuWidth>> -
<<popup-open-direction, popupOpenDirection>> -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<show-action-icons, showActionIcons>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#tab-index[tabIndex] -
<<toggle-popup-visibility-on-click, togglePopupVisibilityOnClick>> -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]