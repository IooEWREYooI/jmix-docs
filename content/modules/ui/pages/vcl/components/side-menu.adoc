= SideMenu 侧边菜单
:page-aliases: backoffice-ui:vcl/components/side-menu.adoc

`SideMenu - 侧边菜单` 组件用来展示纵向可折叠的子菜单。提供了定制 xref:screens/root-screens.adoc#main-screen[主界面]、管理菜单项、添加图标和徽标（badges）以及应用自定义样式的功能。

*Main screen with side menu* 模板中使用了 `SideMenu` 与 xref:vcl/containers/drawer.adoc[Drawer] 布局容器。

与其他可视化组件一样，该组件也可以在任何界面使用。

组件的 XML 名称：`sideMenu`。

== 基本用法

典型的侧边菜单如下：

image::vcl/components/side-menu-anatomy.png[align="center"]

. 根菜单
. 子菜单
. 带图标的菜单项
. 徽标

在界面 XML 描述中定义该组件的示例：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/main/main-screen-side-menu.xml[tags=side-menu]
----

== 数据绑定

[[load-menu-config]]
`loadMenuConfig` 属性用来控制从 `MenuConfig` 加载菜单结构。默认为 `true`，此时 `SideMenu` 组件从 `menu.xml` 文件加载菜单项。

`SideMenu` 实例支持以编程的方式创建菜单项。示例：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenSideMenu.java[tags=main-top-start;inject-for-menu;on-init-for-menu;main-top-end]
----

<1> 创建带图标的菜单项。
<2> 创建带指令操作的菜单项。
<3> 创建菜单徽标。

[[select-on-click]]
== 单击选中

`selectOnClick` 属性设置点击菜单项时，是否同时选中该菜单项。当 `selectOnClick="true"`，选中的菜单项会在鼠标单击时高亮。默认为 `false`。

下面的截屏展示了 `selectOnClick` 属性为 `true` 时的行为：

image::vcl/components/side-menu-select-click.gif[align="center"]

[[show-single-expanded-menu]]

== 显示单一展开菜单

`showSingleExpandedMenu` 属性定义在点击其他父菜单项时，当前展开的菜单项是否需要折叠。默认为 `false`。

下面的截屏展示了 `showSingleExpandedMenu` 属性为 `true` 时的行为：

image::vcl/components/side-menu-show-single.gif[align="center"]

== 样式

`SideMenu` 的外观可以使用 SCSS 变量进行自定义。在创建了 xref:themes/custom_theme.adoc[自定义主题] 之后，可以在可视化编辑器中修改这些变量：

* `$jmix-sidemenu-layout-collapse-enabled` 启用/禁用侧边菜单折叠功能。默认为 `true`。

* `$jmix-sidemenu-layout-collapsed-width` 指定折叠后侧边菜单的宽度。

* `$jmix-sidemenu-layout-expanded-width` 指定展开后侧边菜单的宽度。

* `$jmix-sidemenu-layout-collapse-animation-time` 指定菜单折叠/展开耗费的时间，单位为秒。

当 `$jmix-sidemenu-layout-collapse-enabled` 设置为 `false` 时，*Collapse（折叠）* 按钮不显示，菜单默认展开。

== SideMenu 的方法

[[methods-add-remove-menu-item]]
* `addMenuItem()/removeMenuItem()` - 从根菜单列表的末尾或指定位置添加/删除菜单项。

[[methods-create-menu-item]]
* `createMenuItem()` - 新建菜单项，但是不添加至菜单。`id` 必需且在整个菜单中唯一。菜单项可以有标题、指令和图标。

[[methods-get-menu-item]]
* `getMenuItem()/getMenuItemNN()` - 按照 `id` 查找并返回菜单项。

[[methods-get-menu-items]]
* `getMenuItems()` - 返回所有的根菜单项。

[[methods-has-menu-items]]
* `hasMenuItems()` - 如果菜单包含菜单项，则返回 `true`。

== MenuItem 的方法

[[methods-add-remove-child-item]]
* `addChildItem()/removeChildItem()` - 从子菜单的末尾或指定位置添加/删除菜单项。

[[methods-get-caption]]
* `getCaption()` - 返回菜单项字符串格式的标题。

[[methods-get-children]]
* `getChildren()` - 返回子菜单项列表。

[[methods-set-caption]]
* `setCaption()` - 设置菜单项标题。

[[methods-get-id]]
* `getId()` - 返回菜单项 `id`。

[[methods-get-menu]]
* `getMenu()` - 返回菜单项的父菜单。

[[methods-has-children]]
* `hasChildren()` - 如果菜单包含子菜单项，则返回 `true`。

[[methods-set-badge-text]]
* `setBadgeText()` - 设置菜单项的徽标文本。徽标是显示在菜单项右侧的小部件。

[[methods-set-caption-as-html]]
* `setCaptionAsHtml()` - 启用或禁用 HTML 模式的菜单标题。

[[methods-set-command]]
* `setCommand()` - 设置菜单项指令或操作。点击菜单项时执行。

[[methods-set-description]]
* `setDescription()` - 设置菜单项的字符串描述，作为弹窗提示展示。

[[methods-set-expanded]]
* `setExpanded()` - 默认展开或折叠包含子菜单的菜单项。

[[methods-set-icon]]
* `setIcon()` - 设置菜单项图标。

[[methods-set-stylename]]
* `setStyleName()` - 给组件设置一个或多个自定义样式名，并且会覆盖所有已定义的用户样式。多个样式通过空格分隔的样式名列表指定。样式名必须是有效的 CSS class 名称。

[[methods-set-visible]]
* `setVisible()` - 管理菜单项的可见性。

[[handlers]]
== 事件和处理器

include::../events-hanlers-generation-tip.adoc[]

=== ItemSelectEvent

`ItemSelectEvent` 当选中不可展开的菜单项或某些菜单项指令执行时（例如，打开一个界面）触发。如果菜单项包含子菜单（例如，菜单展开时）则不会触发。

下面示例为 XML 中 id 是 `hobbysideMenuFilter` 的 `SideMenu` 订阅了该事件：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenSideMenu.java[tags=item-select-event]
----

如需以编程的方式注册事件处理器，使用组件的 `addItemSelectListener()` 方法。

[[xml]]
== XML 属性

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<load-menu-config,loadMenuConfig>> -
<<select-on-click,selectOnClick>> -
<<show-single-expanded-menu,showSingleExpandedMenu>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

== SideMenu API

<<methods-add-remove-menu-item,addMenuItem>> -
<<methods-create-menu-item,createMenuItem>> -
<<methods-get-menu-item,getMenuItem>> -
<<methods-get-menu-items,getMenuItems>> -
<<methods-has-menu-items,hasMenuItems>> -
<<methods-add-remove-menu-item,removeMenuItem>>

== MenuItem API

<<methods-add-remove-child-item,addChildItem>> -
<<methods-get-caption,getCaption>> -
<<methods-get-children,getChildren>> -
<<methods-get-id,getId>> -
<<methods-get-menu,getMenu>> -
<<methods-has-children,hasChildren>> -
<<methods-add-remove-child-item,removeChildItem>> -
<<methods-set-badge-text,setBadgeText>> -
<<methods-set-caption,setCaption>> -
<<methods-set-caption-as-html,setCaptionAsHtml>> -
<<methods-set-command,setCommand>> -
<<methods-set-description,setDescription>> -
<<methods-set-expanded,setExpanded>> -
<<methods-set-icon,setIcon>> -
<<methods-set-stylename,setStyleName>> -
<<methods-set-visible,setVisible>>
