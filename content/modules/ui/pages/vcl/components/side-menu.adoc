= SideMenu

`SideMenu` – это компонент для отображения вертикального меню со сворачивающимся выпадающим подменю. `SideMenu` позволяет настраивать xref:screens/root-screens.adoc#main-screen[главное окно приложения], управлять элементами меню, добавлять значки и ярлыки и применять пользовательские стили.

`SideMenu` вместе с контейнером xref:vcl/containers/drawer.adoc[Drawer] используется в шаблоне *Main screen with side menu*.

Его также можно использовать на любом экране, как и любой другой визуальный компонент.

XML-имя компонента: `sideMenu`.

== Основы

Типичное боковое меню представлено ниже:

image::vcl/components/side-menu-anatomy.png[align="center"]

. Корневой элемент
. Подпункт
. Элемент со значком
. Ярлык

Пример описания компонента в XML-дескрипторе экрана:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/main/main-screen-side-menu.xml[tags=side-menu]
----

== Привязка данных

[[load-menu-config]]
Атрибут `loadMenuConfig` используется для управления загрузкой структуры меню из `MenuConfig`. Значение по умолчанию – `true`, в этом случае компонент `SideMenu` загружает пункты меню из файла `menu.xml`.

Пункты меню можно создавать программно, используя экземпляр `SideMenu`,  например:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenSideMenu.java[tags=main-top-start;inject-for-menu;on-init-for-menu;main-top-end]
----

<1> Создание нового пункта меню со значком.
<2> Создание нового пункта меню с действием по клику.
<3> Создание ярлыка для пункта.

[[select-on-click]]
== Выбор по клику

Атрибут `selectOnClick` задает, будет ли текущий пункт меню выбираться щелчком мыши. Когда `selectOnClick="true"`, выбранный пункт меню будет подсвечен при щелчке мыши. Значение по умолчанию – `false`.

На скриншоте ниже показано поведение компонента, когда атрибут `selectOnClick` установлен в `true`:

image::vcl/components/side-menu-select-click.gif[align="center"]

[[show-single-expanded-menu]]

== Единственное развернутое меню

Атрибут `showSingleExpandedMenu` задает, будет ли подменю свернуто при нажатии на другой элемент родительского меню. Значение по умолчанию – `false`.

На скриншоте ниже показано поведение компонента, когда атрибут `showSingleExpandedMenu` установлен в `true`:

image::vcl/components/side-menu-show-single.gif[align="center"]

== Стили

Внешний вид компонента `SideMenu` можно настроить с помощью переменных SCSS. Эти переменные можно изменить в визуальном редакторе после создания xref:themes/custom_theme.adoc[новой темы]:

* `$jmix-sidemenu-layout-collapse-enabled` включает или отключает режим сворачивания бокового меню. Значение по умолчанию – `true`.

* `$jmix-sidemenu-layout-collapsed-width` задает ширину свернутого бокового меню.

* `$jmix-sidemenu-layout-expanded-width` задает ширину развернутого бокового меню.

* `$jmix-sidemenu-layout-collapse-animation-time` задает скорость сворачивания и развертывания бокового меню в секундах.

Если переменная `$jmix-sidemenu-layout-collapse-enabled` имеет значение `false`, то кнопка *Collapse* не отображается, а боковое меню раскрыто.

== Методы SideMenu

[[methods-add-remove-menu-item]]
* `addMenuItem()/removeMenuItem()` - adds/removes the menu item to the end of the root items list or specified position in the root items list.

[[methods-create-menu-item]]
* `createMenuItem()` - creates the new menu item. Does not add items to the menu. `id` is required and must be unique for the whole menu. A menu item can have a caption, command, and icon.

[[methods-get-menu-item]]
* `getMenuItem()/getMenuItemNN()` - returns the item from the menu tree by its `id`.

[[methods-get-menu-items]]
* `getMenuItems()` - returns the list of root menu items.

[[methods-has-menu-items]]
* `hasMenuItems()` - returns `true` if the menu has items.

== Методы MenuItem

[[methods-add-remove-child-item]]
* `addChildItem()/removeChildItem()` - добавляет/удаляет элементы меню в конец или указанную позицию дочернего списка.

[[methods-get-caption]]
* `getCaption()` - возвращает строку заголовка пункта меню.

[[methods-get-children]]
* `getChildren()` - возвращает список дочерних элементов.

[[methods-set-caption]]
* `setCaption()` - указывает заголовок элемента.

[[methods-get-id]]
* `getId()` - возвращает `id` элемента меню.

[[methods-get-menu]]
* `getMenu()` - возвращает владельца элемента меню.

[[methods-has-children]]
* `hasChildren()` - возвращает `true`, если у элемента меню есть дочерние элементы.

[[methods-set-badge-text]]
* `setBadgeText()` - устанавливает текст ярлыка элемента меню. Ярлыки представляют собой небольшие виджеты справа от элемента меню.

[[methods-set-caption-as-html]]
* `setCaptionAsHtml()` - разрешает/запрещает использование HTML-заголовков.

[[methods-set-command]]
* `setCommand()` - используется для описания действия, которое должно быть выполнено при выборе этого элемента меню кликом мыши.

[[methods-set-description]]
* `setDescription()` - задает строковое описание элемента меню, отображаемое в виде всплывающей подсказки.

[[methods-set-expanded]]
* `setExpanded()` - разворачивает или сворачивает подменю с дочерними элементами по умолчанию.

[[methods-set-icon]]
* `setIcon()` - устанавливает значок элемента меню.

[[methods-set-stylename]]
* `setStyleName()` - устанавливает один или более пользовательских стилей для компонента, заменяя все ранее заданные стили. Имена стилей при перечислении отделаются пробелами. Имя стиля должно быть названием существующего CSS-класса.

[[methods-set-visible]]
* `setVisible()` - устанавливает видимость элемента меню.

[[handlers]]
== События и слушатели

include::../events-hanlers-generation-tip.adoc[]

=== ItemSelectEvent

`ItemSelectEvent` отправляется, когда выбран неразворачиваемый пункт меню и выполняется какая-либо команда (например, открытие экрана). Событие не отправляется, если пункт содержит дочерние элементы.

Пример подписки на событие бокового меню, объявленного в XML с идентификатором `sideMenu`:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenSideMenu.java[tags=item-select-event]
----

Чтобы создать слушателя события программно, используйте метод компонента `addItemSelectListener()`.

[[xml]]
== Все XML-атрибуты

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<load-menu-config,loadMenuConfig>> -
<<select-on-click,selectOnClick>> -
<<show-single-expanded-menu,showSingleExpandedMenu>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

== SideMenu API

<<methods-add-remove-menu-item,addMenuItem>> -
<<methods-create-menu-item,createMenuItem>> -
<<methods-get-menu-item,getMenuItem>> -
<<methods-get-menu-items,getMenuItems>> -
<<methods-has-menu-items,hasMenuItems>> -
<<methods-add-remove-menu-item,removeMenuItem>>

== MenuItem API

<<methods-add-remove-child-item,addChildItem>> -
<<methods-get-caption,getCaption>> -
<<methods-get-children,getChildren>> -
<<methods-get-id,getId>> -
<<methods-get-menu,getMenu>> -
<<methods-has-children,hasChildren>> -
<<methods-add-remove-child-item,removeChildItem>> -
<<methods-set-badge-text,setBadgeText>> -
<<methods-set-caption,setCaption>> -
<<methods-set-caption-as-html,setCaptionAsHtml>> -
<<methods-set-command,setCommand>> -
<<methods-set-description,setDescription>> -
<<methods-set-expanded,setExpanded>> -
<<methods-set-icon,setIcon>> -
<<methods-set-stylename,setStyleName>> -
<<methods-set-visible,setVisible>>