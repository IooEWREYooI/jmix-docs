= Tree

++++
<div class="backoffice-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=tree-simple" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

`Tree` — это компонент, использующийся для отображения иерархических структур, представленных расширяемыми узлами дерева. Компонент используется для xref:data-model:entities.adoc[сущностей], которые имеют ссылки на самих себя.

XML-имя компонента: `tree`.

== Основы

Ниже представлено типичное дерево:

image::vcl/components/tree-simple.png[align="center"]

. Переключатели для развертывания и свертывания узлов дерева

Атрибут xref:vcl/xml.adoc#data-container[dataContainer] компонента `Tree` должен содержать ссылку на xref:data/collection-container.adoc[контейнер коллекции].

[[hierarchy-property]]
Атрибут `hierarchyProperty` определяет имя атрибута сущности, которая ссылается на ту же сущность.

Ниже приведен пример описания компонента в XML-дескрипторе экрана:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/tree/tree-screen.xml[tags=data-start;data-departmentsDc;data-end;layout-start;tree-simple;layout-end;]
----

CAUTION: `Tree` отображает сразу все записи, доступные в контейнере данных, поэтому его не следует использовать для отображения большого объема данных.

[[content-mode]]
== Режимы содержимого

Атрибут `contentMode` определяет, как должны отображаться названия элементов дерева. Существует три предопределенных режима:

* `TEXT` - текстовые значения отображаются как простой текст.
* `PREFORMATTED` - текстовые значения отображаются в виде предварительно отформатированного текста. В этом режиме новые строки сохраняются при отображении на экране.
* `HTML` - текстовые значения интерпретируются и отображаются как HTML. При использовании HTML не забывайте экранировать данные, чтобы предотвратить инжектирование кода.

Режим содержимого по умолчанию – `TEXT`.

[[selection-mode]]
== Режимы выделения

Атрибут `selectionMode` определяет режим выделения строк. Существует три предопределенных режима выбора:

* `SINGLE` - поддерживается одновременное выделение только одной строки.
* `MULTI` - поддерживается множественное выделение.
* `NONE` - отключает выделение строк.

Режим выбора по умолчанию – `SINGLE`.

[[row-height]]
== Высота строки

Атрибут `rowHeight` устанавливает высоту строки в пикселях. Если значение равно `-1``, высота строки рассчитывается на основе темы для пустой строки перед отображением дерева.

Значение по умолчанию равно `-1`.

== Методы интерфейса Tree

[[collapse-tree]]
* `collapseTree()` - свертывает все узлы дерева.

[[expand-tree]]
* `expandTree()` - развертывает все узлы дерева.

== События и слушатели

include::../events-hanlers-generation-tip.adoc[]

//TODO: сделать подробное описание в разделе DataGrid и дать отсюда ссылку туда
////
=== detailsGenerator
////

[[collapse-event]]
=== CollapseEvent

Событие, отправляемое при сворачивании элемента.

Пример подписки на событие для дерева, определенного в XML экрана с идентификатором `deptTree`:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=collapse-event]
----

Чтобы создать слушателя события программно, используйте метод компонента `addCollapseListener()`.

[[context-help-icon-click-handler]]
=== ContextHelpIconClickHandler

См. xref:vcl/api.adoc#context-help-icon-click-handler[ContextHelpIconClickHandler].

[[description-provider]]
=== DescriptionProvider

`DescriptionProvider` генерирует описания всплывающих подсказок для элементов дерева, отображаемых, когда на них наводит курсор.

В приведенном ниже примере показано использование `DescriptionProvider` для `simpleTree`:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=description-provider]
----

image::vcl/components/tree-description-provider.png[align="center"]

Чтобы создать слушателя события программно, используйте метод компонента `setDescriptionProvider()`. `DescriptionProvider` может отображать HTML, если значение `ContentMode.HTML` передается параметру `contentMode`.

[[expand-event]]
=== ExpandEvent

`ExpandEvent` отправляется при разворачивании элемента.

Пример подписки на событие для дерева, определенного в XML экрана с идентификатором `deptTree`:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=expand-event]
----

Чтобы создать слушателя события программно, используйте метод компонента `addExpandListener()`.

[[icon-provider]]
=== IconProvider

См. xref:vcl/components/table.adoc#icon-provider[IconProvider].

[[item-caption-provider]]
=== ItemCaptionProvider

`ItemCaptionProvider` позволяет изменить отображаемые названия для каждого элемента дерева:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=item-caption-provider]
----

image::vcl/components/tree-item-caption-provider.png[align="center"]

Чтобы создать слушателя события программно, используйте метод компонента `setItemCaptionProvider()`.

[[lookup-select-handler]]
=== LookupSelectHandler

См. xref:vcl/components/table.adoc#lookup-select-handler[LookupSelectHandler].

[[selection-event]]
=== SelectionEvent

См. xref:vcl/components/table.adoc#selection-event[SelectionEvent].

[[style-provider]]
=== StyleProvider

См. xref:vcl/components/table.adoc#style-provider[StyleProvider].

[[xml]]
== Все XML-атрибуты

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#caption-property[captionProperty] -
xref:vcl/xml.adoc#colspan[colspan] -
<<content-mode,contentMode>> -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#data-container[dataContainer] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#height[height] -
<<hierarchy-property,hierarchyProperty>> -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/xml.adoc#responsive[responsive] -
<<row-height,rowHeight>> -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<selection-mode,selectionMode>> -
xref:vcl/components/tree-table.adoc#show-orphans[showOrphans] -
xref:vcl/components/table.adoc#stylename[stylename] -
xref:vcl/xml.adoc#tab-index[tabIndex] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

[[xml-tree-elements]]
=== XML-элементы дерева

xref:vcl/components/table.adoc#actions[actions] -
xref:vcl/components/table.adoc#buttons-panel[buttonsPanel]

== API

xref:vcl/components/tree-table.adoc#methods-collapse[collapse] -
<<collapse-tree,collapseTree>> -
xref:vcl/components/tree-table.adoc#methods-expand[expand] -
<<expand-tree,expandTree>> -
xref:vcl/components/tree-table.adoc#methods-expand-up-to[expandUpTo] -
xref:vcl/components/table.adoc#methods-get-selected[getSelected] -
xref:vcl/components/table.adoc#methods-get-selected[getSingleSelected] -
xref:vcl/components/tree-table.adoc#methods-is-expanded[isExpanded] -
xref:vcl/components/table.adoc#methods-set-enter-press-action[setEnterPressAction] -
xref:vcl/components/table.adoc#methods-set-item-click-action[setItemClickAction]
