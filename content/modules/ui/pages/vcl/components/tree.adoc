= Tree
:page-aliases: backoffice-ui:vcl/components/tree.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=tree-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`Tree - 树` 组件用来将层级结构展示为可展开的树节点。主要用来展示包含对自身引用的 xref:data-model:entities.adoc[实体]。

组件的 XML 名称：`tree`。

== 基本用法

典型的树如下所示：

image::vcl/components/tree-simple.png[align="center"]

. 展开/折叠树节点的开关

`Tree` 组件的 xref:vcl/xml.adoc#data-container[dataContainer] 属性指向一个 xref:data/collection-container.adoc[集合数据容器]。

[[hierarchy-property]]
`hierarchyProperty` 属性定义引用自身实体属性的名称。

在界面 XML 描述中定义的组件示例：

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/tree/tree-screen.xml[tags=data-start;data-departmentsDc;data-end;layout-start;tree-simple;layout-end;]
----

CAUTION: `Tree` 会一次性的渲染数据容器中的所有数据，因此不要用于展示大量数据的场景。

[[content-mode]]
== 内容模式

`contentMode` 属性定义树节点名称的展示方式。有三种预定义的模式：

* `TEXT` - 文本值直接显示
* `PREFORMATTED` - 文本值以特定格式显示。此时，界面渲染时会保留回车。
* `HTML` - 文本值以 HTML 方式显示。注意，用 HTML 时别忘了转义数据避免代码注入。

The default content mode is `TEXT`.

[[selection-mode]]
== 选择模式

`selectionMode` - 设置行选择模式。有三种预定义的选择模式：

* `SINGLE` - 单选模式。默认模式。
* `MULTI` - 多选模式。
* `NONE` - 禁止选择。

[[row-height]]
== 行高

`rowHeight` 属性设置行高，以像素为单位。如果该值为 `-1`，会在树展示之前根据主题中空行的高度计算行高。

默认值为 `-1`。

== Tree 接口方法

[[collapse-tree]]
* `collapseTree()` - 折叠全部树节点。

[[expand-tree]]
* `expandTree()` - 展开全部树节点。

== 事件和处理器

include::../events-hanlers-generation-tip.adoc[]

//TODO: сделать подробное описание в разделе DataGrid и дать отсюда ссылку туда
////
=== detailsGenerator
////

[[collapse-event]]
=== CollapseEvent

`CollapseEvent` 当节点折叠时发送。

下面示例为 XML 中 id 是 `deptTree` 的 `Tree` 订阅了该事件：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=collapse-event]
----

如需以编程的方式注册事件处理器，使用组件的 `addCollapseListener()` 方法。

[[context-help-icon-click-handler]]
=== ContextHelpIconClickHandler

参阅 xref:vcl/api.adoc#context-help-icon-click-handler[ContextHelpIconClickHandler]。

[[description-provider]]
=== DescriptionProvider

描述 provider 会在用户光标悬停在一个树节点上时生成描述提示。

下面例子中，我们展示为 `simpleTree` 使用 `DescriptionProvider`：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=description-provider]
----

image::vcl/components/tree-description-provider.png[align="center"]

如需以编程的方式注册事件处理器，使用组件的 `setDescriptionProvider()` 方法。如果 `contentMode` 参数是 `ContentMode.HTML`，描述 provider 还可以渲染 HTML。

[[expand-event]]
=== ExpandEvent

`ExpandEvent` 当节点展开时发送。

下面示例为 XML 中 id 是 `deptTree` 的 `Tree` 订阅了该事件：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=expand-event]
----

如需以编程的方式注册事件处理器，使用组件的 `addExpandListener()` 方法。

[[icon-provider]]
=== IconProvider

参阅 xref:vcl/components/table.adoc#icon-provider[IconProvider]。

[[item-caption-provider]]
=== ItemCaptionProvider

节点标题 provider 支持修改树中每个节点的展示标题：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/tree/TreeScreen.java[tags=item-caption-provider]
----

image::vcl/components/tree-item-caption-provider.png[align="center"]

如需以编程的方式注册事件处理器，使用组件的 `setItemCaptionProvider()` 方法。

[[lookup-select-handler]]
=== LookupSelectHandler

参阅 xref:vcl/components/table.adoc#lookup-select-handler[LookupSelectHandler]。

[[selection-event]]
=== SelectionEvent

参阅 xref:vcl/components/table.adoc#selection-event[SelectionEvent]。

[[style-provider]]
=== StyleProvider

参阅 xref:vcl/components/table.adoc#style-provider[StyleProvider]。

[[xml]]
== XML 属性

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#caption-property[captionProperty] -
xref:vcl/xml.adoc#colspan[colspan] -
<<content-mode,contentMode>> -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#data-container[dataContainer] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#height[height] -
<<hierarchy-property,hierarchyProperty>> -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/xml.adoc#responsive[responsive] -
<<row-height,rowHeight>> -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<selection-mode,selectionMode>> -
xref:vcl/components/tree-table.adoc#show-orphans[showOrphans] -
xref:vcl/components/table.adoc#stylename[stylename] -
xref:vcl/xml.adoc#tab-index[tabIndex] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

[[xml-tree-elements]]
=== Tree XML 元素

xref:vcl/components/table.adoc#actions[actions] -
xref:vcl/components/table.adoc#buttons-panel[buttonsPanel]

== API

xref:vcl/components/tree-table.adoc#methods-collapse[collapse] -
<<collapse-tree,collapseTree>> -
xref:vcl/components/tree-table.adoc#methods-expand[expand] -
<<expand-tree,expandTree>> -
xref:vcl/components/tree-table.adoc#methods-expand-up-to[expandUpTo] -
xref:vcl/components/table.adoc#methods-get-selected[getSelected] -
xref:vcl/components/table.adoc#methods-get-selected[getSingleSelected] -
xref:vcl/components/tree-table.adoc#methods-is-expanded[isExpanded] -
xref:vcl/components/table.adoc#methods-set-enter-press-action[setEnterPressAction] -
xref:vcl/components/table.adoc#methods-set-item-click-action[setItemClickAction]
