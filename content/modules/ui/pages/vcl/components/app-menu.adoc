= AppMenu

Компонент `AppMenu` отображает горизонтальное меню с иерархическими выпадающими подменю. `AppMenu` позволяет динамически управлять элементами главного меню, добавлять иконки и применять пользовательские стили на xref:screens/root-screens.adoc#main-screen[главном экране] приложения.

`AppMenu` используется в шаблоне *Main screen with top menu*.

По умолчанию `AppMenu` загружает структуру меню из `MenuConfig`.

XML-имя компонента: `menu`.

== Основы

Ниже показано типичное меню:

image::vcl/components/app-menu-anatomy.png[align="center"]

. Корневой элемент
. Подпункт
. Пункт со значком
. Разделитель

Пример определения компонента в XML-дескрипторе экрана:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/main/main-screen-top-menu.xml[tags=app-menu]
----

Используя экземпляр `AppMenu`, элементы меню можно создавать программно, например:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=main-top-start;inject-for-menu;on-init-start;on-init-for-menu;on-init-end;main-top-end]
----

<1> Создание нового пункта меню со значком.
<2> Создание нового пункта меню с действием по клику.
<3> Создание разделителя.

== Методы AppMenu

[[methods-add-remove-menu-item]]
* `addMenuItem()/removeMenuItem()` - добавляет/удаляет элемент меню в конец или на указанную позицию в списке корневых элементов.
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=remove-menu-item]
----

[[methods-create-menu-item]]
* `createMenuItem()` - фабричный метод для создания нового элемента меню. Не добавляет элемент к меню. `id` обязателен и должен быть уникальным внутри всего меню. Элемент меню может иметь заголовок, действие по клику и иконку.

[[methods-create-separator]]
* `createSeparator()` - создает разделитель элементов меню.

[[methods-get-menu-item]]
* `getMenuItem()/getMenuItemNN()` - возвращает объект элемента меню по его идентификатору.

[[methods-get-menu-items]]
* `getMenuItems()` - возвращает список корневых элементов меню.

[[methods-has-menu-items]]
* `hasMenuItems()` - возвращает `true`, если меню содержит элементы.

== Методы MenuItem

[[methods-add-remove-child-item]]
* `addChildItem()/removeChildItem()` - добавляет/удаляет элемент меню в конец или на указанную позицию в списке дочерних элементов.
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=remove-child-item]
----
[[methods-get-caption]]
* `getCaption()` - возвращает строковый заголовок элемента меню.

[[methods-get-children]]
* `getChildren()` - возвращает список дочерних элементов.

[[methods-set-caption]]
* `setCaption()` - устанавливает заголовок элемента.

[[methods-set-command]]
* `setCommand()` - используется для описания действия, которое должно быть выполнено при выборе этого элемента меню кликом мыши.

[[methods-set-description]]
* `setDescription()` -  устанавливает строковое описание элемента меню, отображаемое в виде всплывающей подсказки.

[[methods-set-icon]]
* `setIcon()` - устанавливает значок элемента.
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=set-icon]
----

[[methods-get-id]]
* `getId()` - возвращает идентификатор элемента.

[[methods-get-menu]]
* `getMenu()` - возвращает родительский экземпляр `AppMenu`.

[[methods-set-stylename]]
* `setStylename()` - устанавливает один или более пользовательских стилей для компонента, заменяя все ранее заданные стили. Имена стилей при перечислении отделяются пробелами. Имя стиля должно быть названием существующего CSS-класса.

[[methods-has-children]]
* `hasChildren()` - возвращает `true`, если у элемента меню есть дочерние элементы.

[[methods-is-separator]]
* `isSeparator()` - возвращает `true`, если элемент является разделителем.

[[methods-set-visible]]
* `setVisible()` - управляет видимостью элемента меню.

== Внешний вид

Внешний вид компонента `AppMenu` можно настроить с помощью переменных SCSS с префиксами `$jmix-menubar-++*++` и `$jmix-app-menubar-*`. Эти переменные можно изменить в визуальном редакторе после создания xref:themes/custom_theme.adoc[новой темы].

[[xml]]
== Все XML-атрибуты

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

== AppMenu API

<<methods-add-remove-menu-item,addMenuItem>> -
<<methods-create-menu-item,createMenuItem>> -
<<methods-create-separator,createSeparator>> -
<<methods-get-menu-item,getMenuItem>> -
<<methods-get-menu-items,getMenuItems>> -
<<methods-has-menu-items,hasMenuItems>> -
<<methods-add-remove-menu-item,removeMenuItem>>

== MenuItem API

<<methods-add-remove-child-item,addChildItem>> -
<<methods-get-caption,getCaption>> -
<<methods-get-children,getChildren>> -
<<methods-get-id,getId>> -
<<methods-get-menu,getMenu>> -
<<methods-has-children,hasChildren>> -
<<methods-is-separator,isSeparator>> -
<<methods-add-remove-child-item,removeChildItem>> -
<<methods-set-caption,setCaption>> -
<<methods-set-command,setCommand>> -
<<methods-set-description,setDescription>> -
<<methods-set-icon,setIcon>> -
<<methods-set-stylename,setStylename>> -
<<methods-set-visible,setVisible>>