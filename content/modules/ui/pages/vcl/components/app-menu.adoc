= AppMenu
:page-aliases: backoffice-ui:vcl/components/app-menu.adoc

`AppMenu - 应用程序菜单` 是一个展示水平菜单和下拉子菜单的组件。`AppMenu` 支持动态管理主菜单元素、添加图标以及使用应用程序 xref:screens/root-screens.adoc#main-screen[主界面] 的自定义样式。

`AppMenu` 用在 *Main screen with top menu* 模板中。

默认情况下，`AppMenu` 从 `MenuConfig` 加载菜单结构。

组件的 XML 名称：`menu`。

== 基本用法

下图是一个典型的菜单：

image::vcl/components/app-menu-anatomy.png[align="center"]

. 根菜单
. 子菜单
. 带图标的菜单
. 分隔线

在界面 XML 中定义组件的示例：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/main/main-screen-top-menu.xml[tags=app-menu]
----

使用 `AppMenu` 实例，能以编程的方式创建菜单项，示例：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=main-top-start;inject-for-menu;on-init-start;on-init-for-menu;on-init-end;main-top-end]
----

<1> 创建一个带图标的菜单项。
<2> 创建一个带指令操作的菜单项。
<3> 创建一个菜单分隔线。

== AppMenu 方法

[[methods-add-remove-menu-item]]
* `addMenuItem()/removeMenuItem()` - 从菜单列表末尾或指定位置添加/删除菜单项。
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=remove-menu-item]
----

[[methods-create-menu-item]]
* `createMenuItem()` - 创建新菜单项。并不会把菜单项目添加到菜单里。必须提供 `id` 参数，且在全部菜单项中唯一。菜单项可以有标题、指令和图标。

[[methods-create-separator]]
* `createSeparator()` - 创建菜单分隔线。

[[methods-get-menu-item]]
* `getMenuItem()/getMenuItemNN()` - 根据菜单树中的 `id` 返回菜单项。

[[methods-get-menu-items]]
* `getMenuItems()` - 返回根菜单项列表。

[[methods-has-menu-items]]
* `hasMenuItems()` - 如果菜单包含菜单项则返回 `true`。

== MenuItem 方法

[[methods-add-remove-child-item]]
* `addChildItem()/removeChildItem()` - 在子菜单项列表末尾或者指定位置添加/删除菜单项。
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=remove-child-item]
----
[[methods-get-caption]]
* `getCaption()` - 返回菜单项的字符串标题。

[[methods-get-children]]
* `getChildren()` - 返回子菜单项列表。

[[methods-set-caption]]
* `setCaption()` - 设置菜单项标题。

[[methods-set-command]]
* `setCommand()` - 设置菜单项点击时要执行的指令或操作。

[[methods-set-description]]
* `setDescription()` - 设置菜单项的字符串描述，会在弹出提示中显示。

[[methods-set-icon]]
* `setIcon()` - 设置菜单项的图标。
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/main/MainScreenTopMenu.java[tags=set-icon]
----

[[methods-get-id]]
* `getId()` - 返回菜单项的 id。

[[methods-get-menu]]
* `getMenu()` - 返回菜单项所属菜单。

[[methods-set-stylename]]
* `setStylename()` - 设置一个或多个自定义的样式名称，会替换已有的所有自定义样式。多个样式名之间用空格分开。样式名称必须是有效的 CSS 类名称。

[[methods-has-children]]
* `hasChildren()` - 该菜单项有子菜单项时返回 `true`。

[[methods-is-separator]]
* `isSeparator()` - 如果该菜单项是分隔线的话返回 `true`。

[[methods-set-visible]]
* `setVisible()` - 设置菜单项是否可见。

== 样式

`AppMenu` 组件的外观可以使用带 `$jmix-menubar-++*++` 和 `$jmix-app-menubar-*` 前缀的 SCSS 变量进行自定义。在创建了 xref:themes/custom_theme.adoc[自定义主题] 之后，可以在可视化编辑器中修改这些变量。

[[xml]]
== AppMenu XML 属性

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

== AppMenu API

<<methods-add-remove-menu-item,addMenuItem>> -
<<methods-create-menu-item,createMenuItem>> -
<<methods-create-separator,createSeparator>> -
<<methods-get-menu-item,getMenuItem>> -
<<methods-get-menu-items,getMenuItems>> -
<<methods-has-menu-items,hasMenuItems>> -
<<methods-add-remove-menu-item,removeMenuItem>>

== MenuItem API

<<methods-add-remove-child-item,addChildItem>> -
<<methods-get-caption,getCaption>> -
<<methods-get-children,getChildren>> -
<<methods-get-id,getId>> -
<<methods-get-menu,getMenu>> -
<<methods-has-children,hasChildren>> -
<<methods-is-separator,isSeparator>> -
<<methods-add-remove-child-item,removeChildItem>> -
<<methods-set-caption,setCaption>> -
<<methods-set-command,setCommand>> -
<<methods-set-description,setDescription>> -
<<methods-set-icon,setIcon>> -
<<methods-set-stylename,setStylename>> -
<<methods-set-visible,setVisible>>
