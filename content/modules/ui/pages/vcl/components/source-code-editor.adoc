= SourceCodeEditor
:page-aliases: backoffice-ui:vcl/components/source-code-editor.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/4/sample?id=sourcecodeeditor-mode" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`SourceCodeEditor - 源码编辑器` 用于显示和输入源代码。它是一个多行文本域，提供代码高亮显示、行号以及能实现代码自动完成。

image::vcl/components/source-code-editor.png[align="center"]

组件的 XML 名称：`sourceCodeEditor`。

[[attributes]]
== 属性

`SourceCodeEditor` 功能与 xref:vcl/components/text-field.adoc[] 一致，但具有下列特殊属性：

[[handle-tab-key]]
* `handleTabKey` - 定义 *Tab* 按键是否需要作为缩进处理。默认为 `false`，*Tab* 用于移动光标或焦点到下一个制表位。

[[highlight-active-line]]
* `highlightActiveLine` - 定义是否高亮光标所在行。默认为 `true`。

[[mode-attribute]]
* `mode` - 提供语法高亮支持的语言列表：
** `Java`
** `CSS`
** `Groovy`
** `HTML`
** `JavaScript`
** `Properties`
** `SCSS`
** `SQL`
** `XML`
** `Text` - 默认值，不会高亮任何内容。

[[print-margin]]
* `printMargin` - 定义是否显示打印边缘线。默认为 `true`。

[[print-margin-column]]
* `printMarginColumn` - 定义打印列宽度。默认为 `80` 字符。

[[show-gutter]]
* `showGutter` - 定义是否显示带有行号的左侧边栏。

[[suggest-on-dot]]
* `suggestOnDot` - 定义在用户输入点号（“.”）时，是否调用 <<suggester,智能建议>> 处理器。

[[handlers]]
== 事件和处理器

include::../events-hanlers-generation-tip.adoc[]

[[context-help-icon-click-event]]
=== ContextHelpIconClickEvent

参阅 xref:vcl/api.adoc#context-help-icon-click-handler[ContextHelpIconClickEvent]。

[[mode]]
=== 高亮模式

`Mode` 代理方法支持选择一种语言进行语法高亮：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/sourcecodeeditor/SourceCodeEditorScreen.java[tags=mode]
----

如需以编程的方式使用，调用组件的 `setMode()` 方法。

[[suggester]]
=== 智能建议

`SourceCodeEditor` 支持由 `Suggester` 处理器提供的代码自动完成功能。

下面示例实现了 Java 关键字的自动完成功能。

. 在界面 XML 描述中定义组件：
+
[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/sourcecodeeditor/source-code-editor-screen.xml[tags=suggester]
----

. 定义 suggester 处理器并返回用于自动完成的值列表：
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/sourcecodeeditor/SourceCodeEditorScreen.java[tags=keyword;suggester]
----

最后，我们完成了一个带自动完成功能的简易 Java 代码编辑器：

image::vcl/components/source-code-suggester.gif[align="center"]

如需手动调用智能建议，可以按下 *Ctrl+Space*。根据 <<suggest-on-dot, suggestOnDot>> 的配置，建议也可以在按下点号后自动显示。

如需以编程的方式使用，调用组件的 `setSuggester()` 方法。

[[validator]]
=== Validator

为组件添加 xref:vcl/miscellaneous/validator.adoc[validator] 实例。如果值验证失败，`validator` 必须抛出 `ValidationException` 异常。

如果 <<predefined-validators,预定义>> 的验证器不能满足要求，可以添加自定义的验证器实例：

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/textfield/TextFieldScreen.java[tags=validator]
----

[[value-change-event]]
=== ValueChangeEvent

参阅 xref:vcl/api.adoc#value-change-event[ValueChangeEvent]。

[[appearance]]
== 样式

`SourceCodeEditor` 的外观可以使用带 `$jmix-sourcecodeeditor-*` 前缀的 SCSS 变量进行自定义。

[[xml]]
== SourceCodeEditor XML Attributes

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#data-container[dataContainer] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#editable[editable] -
xref:vcl/xml.adoc#enable[enable] -
<<handle-tab-key, handleTabKey>> -
xref:vcl/xml.adoc#height[height] -
<<highlight-active-line, highlightActiveLine>> -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<mode-attribute, mode>> -
<<print-margin, printMargin>> -
<<print-margin-column, printMarginColumn>> -
xref:vcl/xml.adoc#property[property] -
xref:vcl/xml.adoc#required[required] -
xref:vcl/xml.adoc#required-message[requiredMessage] -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<show-gutter, showGutter>> -
xref:vcl/xml.adoc#stylename[stylename] -
<<suggest-on-dot, suggestOnDot>> -
xref:vcl/xml.adoc#tab-index[tabIndex] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]

== SourceCodeEditor XML Element

xref:vcl/components/password-field.adoc#validators-element[validators]
