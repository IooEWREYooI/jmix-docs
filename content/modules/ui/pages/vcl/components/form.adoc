= Form

++++
<div class="backoffice-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=form-simple" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

//todo add link to GridLayout
Компонент `Form` предназначен для совместного отображения и редактирования нескольких атрибутов сущности.

XML-имя компонента: `form`.

[[basics]]
== Основы

`Form` представляет собой простой контейнер, схожий с `GridLayout`, и может содержать любое количество колонок с полями. Тип полей задается декларативно в XML-дескрипторе экрана, заголовки полей располагаются слева от поля. Главное отличие от `GridLayout` состоит в том, что `Form` позволяет привязать все вложенные поля к единому xref:vcl/xml.adoc#data-container[контейнеру данных].

Пример использования:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/form/form-screen.xml[tags=data-start;order-dc;data-end;layout-start;form-1;layout-end]
----

image::vcl/components/form-1.png[align="center"]

В этом примере компонент `Form` отображает атрибуты сущности, загруженной в контейнер данных `orderDc`. Вложенные элементы формы определяют визуальные компоненты, связанные с атрибутами сущности, с помощью XML-атрибута `property`. Заголовки полей будут созданы автоматически на основе локализованных имен атрибутов сущности.

//todo add link to "component generation strategies" - pluggable component factories
Кроме конкретных визуальных компонентов, в форме можно объявлять обобщенные поля с помощью элемента `field`. Фреймворк выберет подходящий визуальный компонент на основе соответствующего полю атрибута сущности и имеющихся стратегий генерации компонентов.

Вложенные компоненты могут иметь любые собственные атрибуты, такие как `description`, показанный в примере. Чтобы добавить вложенный компонент в контроллер экрана, укажите для него атрибут `id` в XML.

[[attributes]]
== Атрибуты

[[data-container]]
* `dataContainer` – указывает xref:vcl/xml.adoc#data-container[контейнер данных] для вложенных полей.
[[caption-position]]
* `captionPosition` – задает положение заголовков полей: `TOP` или `LEFT`.
[[children-caption-alignment]]
* `childrenCaptionAlignment` – определяет выравнивание заголовков дочерних компонентов во всех вложенных колонках. Принимает два значения: `LEFT` и `RIGHT`. Значение по умолчанию – `LEFT`. Применяется только в том случае, если атрибут `captionPosition` имеет значение `LEFT`.
[[children-caption-width]]
* `childrenCaptionWidth` – позволяет задать фиксированную ширину заголовков всех вложенных колонок и их дочерних полей. Значение `-1` устанавливает ширину по содержимому (`AUTO`), то есть по суммарной ширине вложенных компонентов.
[[rowspan]] [[colspan]]
* `colspan` и `rowspan`:
+
Компонент `Form` поддерживает атрибуты `colspan` и `rowspan`. Эти атрибуты задают, сколько колонок и строк будет занимать данный вложенный компонент. Например, так можно растянуть поле `Field 1` на две колонки:
+
[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/form/form-screen.xml[tags=layout-start;form-2;layout-end]
----
+
image::vcl/components/form-2.png[align="center"]
+
Аналогично, поле `Field 1` можно растянуть на две строки:
+
[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/form/form-screen.xml[tags=layout-start;form-3;layout-end]
----
+
image::vcl/components/form-3.png[align="center"]

[[methods]]
== Методы

* `setChildrenCaptionAlignment(CaptionAlignment alignment)` – задает выравнивание заголовков дочерних компонентов во всех столбцах.
* `setChildrenCaptionAlignment(int column, CaptionAlignment alignment)` – задает выравнивание заголовков дочерних компонентов для заданного столбца.
* `add()` – позволяет добавлять одно или несколько полей в `Form` программно:
+
В качестве параметра он принимает экземпляр `Component`, также можно указать позицию поля, передав индексы колонки и строки с помощью атрибутов `column` и `row`. Кроме того, перегруженный метод принимает параметры `rowspan` и `colspan`.
+
Компоненты, добавляемые программно, не привязываются к контейнеру данных `Form` автоматически, поэтому для связывания с данными нужно использовать метод `setValueSource()` добавляемого компонента.
+
Например:
+
[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/form/form-screen.xml[tags=data-start;customer-dc;data-end;layout-start;form-4;layout-end]
----
+
Поле `email` можно добавить программно в контроллере экрана следующим образом:
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/form/FormScreen.java[tags=form]
----

[[column-elements]]
== Элемент Column

`Column` – это необязательный элемент, позволяющий располагать поля в несколько колонок. Для этого вложенные элементы должны находиться не непосредственно внутри `form`, а внутри своего `column`. Например:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/form/form-screen.xml[tags=layout-start;form-5;layout-end]
----

В данном случае поля будут расположены в две колонки, причем в первой колонке все поля будут шириной `250px`, а во второй – `400px`.

image::vcl/components/form-5.png[align="center"]

[[column-attributes]]
=== Атрибуты Column

//todo add link to screen extension
* `id` – необязательный идентификатор колонки, позволяющий ссылаться на нее в случае расширении экрана.
* `width` – задает ширину полей данной колонки. По умолчанию ширина полей – `200px`. В данном атрибуте ширина может быть задана как в пикселах, так и в процентах от общего размера колонки по горизонтали.
* `childrenCaptionWidth` – позволяет задать фиксированную ширину заголовков всех дочерних полей. Значение `-1` устанавливает ширину по содержимому (`AUTO`).
* `childrenCaptionAlignment` – определяет выравнивание заголовков вложенных полей. Принимает два значения: `LEFT` и `RIGHT`. Значение по умолчанию – `LEFT`. Применяется только в том случае, если атрибут `<<caption-position, captionPosition>>` имеет значение `LEFT`.

[[xml]]
== Все XML-атрибуты

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
<<caption-position, captionPosition>> -
<<children-caption-alignment, childrenCaptionAlignment>> -
<<children-caption-width, childrenCaptionWidth>> -
<<colspan, colspan>> -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
<<data-container, dataContainer>> -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#editable[editable] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/xml.adoc#responsive[responsive] -
<<rowspan, rowspan>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]