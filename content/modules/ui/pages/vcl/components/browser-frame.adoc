= BrowserFrame
:page-aliases: backoffice-ui:vcl/components/browser-frame.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=browserframe-classpath" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`BrowserFrame - 浏览器框架` 支持在 UI 界面中嵌入外部内容，例如，网页、PDF 文件、图片。

image::vcl/components/browser-frame.png[align="center"]

组件的 XML 名称：`browserFrame`。

[[basics]]
== 基本用法

如需展示外部内容，需要定义 `resource` 元素及其内部的下列元素之一：

* `classpath`
* `file`
* `relativePath`
* `theme`
* `url`

示例：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=url-example]
----

了解更多关于 xref:vcl/components/image.adoc#resources[resources] 和 xref:vcl/components/image.adoc#resource-settings[resource 设置] 相关内容，请访问 xref:vcl/components/image.adoc[] 组件页。

[[attributes]]
== 属性

[[allow]]
=== allow

该属性支持指定嵌入浏览器的 https://developers.google.com/web/updates/2018/06/feature-policy[功能策略^]。属性值必须是下列可选值的列表，以空格分隔，这些值支持当前嵌入的内容支持：

1. `autoplay` - 从接口请求自动播放的媒体。
2. `camera` - 使用视频输入设备。
3. `document-domain` - 设置 `document.domain`.
4. `encrypted-media` - 使用加密媒体扩展 API（EME）。
5. `fullscreen` - 使用 `Element.requestFullScreen()`。
6. `geolocation` - 使用地理位置接口。
7. `microphone` -  使用音频输入设备。
8. `midi` - 使用 Web MIDI API。
9. `payment` - 使用支付请求 API。
10. `vr` - 使用 WebVR API。

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=allow]
----

[[alternate-text]]
=== alternateText

如果 frame 中没有设置内容源或者内容源不可用的情况下，作为默认显示的文字。

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=alternative-text]
----

[[referrerpolicy]]
=== referrerpolicy

设置当获取 frame 的资源时，发送给哪个 referrer。属性值必须是下列可选值的列表，以空格分隔：

1. `no-referrer` - 不会发送 referer header。
2. `no-referrer-when-downgrade` - 如果不是 TLS（HTTPS），则不会发送 referer header 给 origins。
3. `origin` - 发送的 referrer 限制在 referrer 网页的 origin：scheme、host、port。
4. `origin-when-cross-origin` -  发送给其他 origins 的 referrer 会被限制在 scheme、host 和 port。同源浏览也仍会包含 path。
5. `same-origin` - 同源则会发送 referrer，但是跨域的请求不会包含 referrer 信息。
6. `strict-origin` - 在协议的安全级别相同（HTTPS->HTTPS）时，将网页的 orign 作为 referrer 发送，但是不会发送给低安全级别的目的地（HTTPS->HTTP）。
7. `strict-origin-when-cross-origin` - 当发起同源请求时发送全部 URL；在协议的安全级别相同（HTTPS->HTTPS）时，只发送 origin；如果是低安全级别的目的地（HTTPS->HTTP），则不会发送 header。
8. `unsafe-url` - referrer 会包含 origin 和 path。该值不安全，因为从 TLS 保护的资源转到了不安全的 origins，从而泄露了 origins 和 paths。

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=referrerpolicy]
----

[[sandbox]]
=== sandbox

对嵌入的内容做更多的限制。该属性的值如果是空则使用所有限制，或者设置为空格分隔的标记解除特定的限制。属性值必须是下列可选值的列表，以空格分隔：

1. `allow-downloads-without-user-activation` - 允许在没有用户交互的情况下进行下载。
2. `allow-forms` - 允许提交表单。
3. `allow-modals` - 允许打开模态窗。
4. `allow-orientation-lock` - 允许锁住屏幕朝向。
5. `allow-pointer-lock` - 允许使用 Pointer Lock API。
6. `allow-popups` -  允许弹窗，例如：
* `window.open()`
* `target="_blank"`
* `showModalDialog()`
7. `allow-popups-to-escape-sandbox` -  允许沙盒内的网页打开新窗口，并且这些新窗口不继承当前的沙盒。
8. `allow-presentation` - 允许开启一个展示会话。
9. `allow-same-origin` - 允许嵌入的内容当做同源（same origin）处理。
10. `allow-scripts` - 允许运行脚本。
11. `allow-storage-access-by-user-activation` -  允许请求访问父网页的存储能力，能使用 Storage Access API。
12. `allow-top-navigation` - 允许嵌入内容中的超链接导航到父级窗口。
13. `allow-top-navigation-by-user-activation` - 允许嵌入内容中的超链接导航到父级窗口，但仅支持新网页是通过用户交互产生。

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=sandbox]
----

[[srcdoc]]
=== srcdoc

该属性设置组件将要展示 HTML 代码。需要对 HTML 代码进行转义。示例：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=srcdoc]
----

image::vcl/components/browser-frame-src.png[align="center"]

[[srcdoc-file]]
=== srcdocFile

该属性设置包含 HTML 代码文件的路径。文件内容通过 `classPath` 资源获取。

[[handlers]]
== 事件和处理器

include::../events-hanlers-generation-tip.adoc[]

[[context-help-icon-click-event]]
=== ContextHelpIconClickEvent

参阅 xref:vcl/api.adoc#context-help-icon-click-handler[ContextHelpIconClickEvent]。

[[source-change-event]]
=== SourceChangeEvent

参阅 xref:vcl/components/image.adoc#source-change-event[SourceChangeEvent]。

[[xml]]
== BrowserFrame XML 属性

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
<<allow, allow>> -
<<alternate-text, alternateText>> -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<referrerpolicy, referrerpolicy>> -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<sandbox, sandbox>> -
<<srcdoc, srcdoc>> -
<<srcdoc-file, srcdocFile>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]
