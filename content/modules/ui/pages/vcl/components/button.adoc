= Button

++++
<div class="backoffice-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=button-simple" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

Кнопка (`Button`) выполняет действия при нажатии пользователем.

XML-имя компонента: `button`

== Основы

У кнопки может быть текст, значок или и то и другое.

image::vcl/components/button.png[align="center"]

Пример кнопки с названием, взятым из пакета локализованных сообщений, и с всплывающей подсказкой:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=button-1]
----

Название кнопки задается с помощью атрибута xref:vcl/xml.adoc#caption[caption], всплывающая подсказка − с помощью атрибута xref:vcl/xml.adoc#description[description].

Для обработки нажатия на кнопку создайте слушатель события `ClickEvent` в контроллере экрана:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/button/ButtonScreen.java[tags=click-handler]
----

[[disableOnClick]]
Если атрибут `disableOnClick` имеет значение `true`, кнопка будет автоматически отключена после нажатия по ней. Обычно это делается для того, чтобы предотвратить случайные повторные нажатия. Впоследствии, можно снова включить кнопку вызовом метода `setEnabled(true)`.

Атрибут xref:vcl/xml.adoc#icon[icon] указывает на местоположение значка в каталоге темы или имя элемента в используемом наборе значков. Подробную информацию о том, где следует располагать файлы значков, можно прочитать в разделе xref:icons.adoc[Значки].

Пример создания кнопки со значком:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=button-icon]
----

[[action]]
== Action

Другой способ обработки нажатий на кнопку – связать ее с интерфейсом xref:actions.adoc[Action]:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=action-1;action-2;layout-end]
----

Кнопке можно назначить любое действие, определенное в окне или табличном компоненте (они реализуют интерфейс `Component.ActionsHolder`). В случае действия, определенном в окне, укажите id действия в атрибуте кнопки `action`, как в примере выше. В случае действия, определенном в компоненте, укажите id компонента и id действия, разделенные точкой. В следующем примере кнопка связана с действием `create` компонента `usersTable`:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=action-3;table-end]
----

Действие для кнопки можно также создавать программно, в контроллере экрана, используя наследование от класса xref:actions/base-action.adoc[BaseAction].

[NOTE]
====

Если для `Button` установлен экземпляр `Action`, то следующие свойства `Button` будут иметь приоритет над свойствами `Action`:

* xref:vcl/xml.adoc#caption[caption],
* xref:vcl/xml.adoc#description[description],
* xref:vcl/xml.adoc#enable[enable],
* xref:vcl/xml.adoc#icon[icon],
* <<primary,primary>>,
* <<shortcut,shortcut>>,
* xref:vcl/xml.adoc#visible[visible].

Перечисленные свойства будут взяты из `Action` только в том случае, если они не установлены в самом `Button`.
====

[[shortcut]]
== Shortcut

С помощью атрибута `shortcut` можно задать комбинацию клавиш для кнопки. Возможные модификаторы: `ALT`, `CTRL`, `SHIFT` – отделяются символом "-". Например:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=shortcut]
----

[[styles]]
== Предопределенные стили

[[primary]]
Атрибут `primary` позволяет задать подсветку отдельных кнопок. Подсветка автоматически применится к кнопке, если у действия, вызываемого этой кнопкой, атрибут xref:actions/declarative-actions.adoc#primary[primary] имеет значение `true`.

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=primary-btn]
----

image::vcl/components/button-primary.png[align="center"]

В темах `hover` и `helium` подсветка доступна по умолчанию; для ее активации в теме, основанной на `halo`, установите значение `true` для xref:themes/custom_theme.adoc#theme-modify-common-parameters[переменной стиля] `$jmix-highlight-primary-action`.

[[stylename]]
Предопределенные стили компонента `Button` задаются в XML-дескрипторе или контроллере экрана с помощью атрибута `stylename`:

[source, xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/button/button-screen.xml[tags=borderless-btn]
----

Чтобы применить стиль программно, выберите одну из констант класса `ThemeClassNames` с префиксом `BUTTON_`:


[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/button/ButtonScreen.java[tags=set-style-name]
----

Предопределенные стили:

[[button-borderless]]
* `borderless` - кнопка без полей. Совместим с любым другим стилем `Button`.
+
image::vcl/components/borderless-button.gif[align="center"]

[[button-borderless-colored]]
* `borderless-colored` - кнопка без полей с цветной надписью. Совместим с любым другим стилем `Button`.
+
image::vcl/components/borderless-colored-button.gif[align="center"]

[[button-danger]]
* `danger` - выделенная кнопка, обозначающая действие, потенциально небезопасное для пользователя (которое, например, может вызвать потерю данных и прочие необратимые изменения). Совместим с любым другим стилем `Button`.
+
image::vcl/components/danger-button.gif[align="center"]

[[button-friendly]]
* `friendly` - выделенная кнопка, обозначающая основное действие, безопасное для пользователя (например, не вызывающее потери данных и прочих необратимых изменений). Совместим с любым другим стилем `Button`.
+
image::vcl/components/friendly-button.gif[align="center"]

[[button-icon-align-right]]
* `icon-align-right` - выравнивание значка по правому краю надписи. Совместим с любым другим стилем `Button`.
+
image::vcl/components/icon-right-button.gif[align="center"]

[[button-icon-align-top]]
* `icon-align-top` - расположение значка над надписью. Совместим с любым другим стилем `Button`.
+
image::vcl/components/icon-top-button.gif[align="center"]

[[button-icon-only]]
* `icon-only` - отображается только значок, кнопка квадратной формы.
+
image::vcl/components/button-icon-only.png[align="center"]

[[button-primary]]
* `primary` - кнопка основного действия (например, кнопка, получающая фокус при нажатии кнопки *Enter* в форме ввода). Используйте внимательно, не более одной основной кнопки на представление.

[[button-quiet]]
* `quiet` - "незаметная" кнопка, поля которой не видны до наведения указателя мыши. Совместим с любым другим стилем `Button`.
+
image::vcl/components/quiet-button.gif[align="center"]

Внешний вид компонента `Button` можно настроить с помощью переменных SCSS с префиксом `$jmix-button-*`. Эти переменные можно изменить в визуальном редакторе после создания xref:themes/custom_theme.adoc[новой темы].

[[method-click]]
== Метод Click

Метод `click()` интерфейса `Button` симулирует нажатие кнопки, уведомляя всех слушателей на стороне сервера. simulates a button click, notifying all server-side listeners.

Если кнопка отключена, никаких действий не предпринимается.

[[handlers]]
== События и слушатели

include::../events-hanlers-generation-tip.adoc[]

[[click-event]]
=== ClickEvent

`ClickEvent` отправляется при нажатии пользователем на кнопку.

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/button/ButtonScreen.java[tags=click-handler-1]
----

<1> Аннотация `@Subscribe` содержит id кнопки.
<2> При необходимости нажатую кнопку можно получить из объекта события.

Чтобы создать слушателя этого события программно, используйте метод компонента `addClickListener()`.

[[xml]]
== Все XML-атрибуты

include::../xml-studio-tip.adoc[]

<<action,action>> -
xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
<<disableOnClick,disableOnClick>> -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<primary,primary>> -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<shortcut,shortcut>> -
<<stylename,stylename>> -
xref:vcl/xml.adoc#tab-index[tabIndex] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]
