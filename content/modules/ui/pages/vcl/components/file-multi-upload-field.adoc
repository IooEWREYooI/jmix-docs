= FileMultiUploadField

Компонент `FileMultiUploadField` позволяет загружать файлы во xref:files:uploading-files.adoc#using-temporary-storage[временное хранилище]. После этого их можно обработать как объекты `File` в файловой системе сервера или переместить в xref:files:index.adoc[файловое хранилище].

При нажатии на кнопку отображается стандартное для операционной системы окно выбора файлов, в котором можно выбрать сразу несколько файлов для загрузки.

image::vcl/components/file-multi-upload-field.gif[align="center"]

XML-имя компонента: `fileMultiUpload`.

[[basics]]
== Основы

Рассмотрим пример использования компонента.

Объявим компонент в XML-дескрипторе экрана:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/filemultiuploadfield/file-multi-upload-field-screen.xml[tags=file-multi-upload-filed]
----

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/component/filemultiuploadfield/FileMultiUploadFieldScreen.java[tags=multi]
----

<1> В контроллере экрана определим сам компонент и интерфейс `TemporaryStorage`.
<2> При инициализации экрана добавим слушателей, которые будут реагировать на события успешной загрузки или ошибки.
<3> Компонент загружает выбранные файлы во временное хранилище и вызывает слушатель, добавленный методом `addQueueUploadCompleteListener()`.
<4> В данном слушателе вызовом метода `FileMultiUploadField.getUploadsMap()` можно получить мэп идентификаторов файлов во временном хранилище на имена файлов.
<5> Далее загружаемые файлы можно переместить из временного хранилища в постояное FileStorage и получить соответствующие объекты `FileRef`.
<6> После обработки необходимо очистить список файлов вызовом `clearUploads()`.

[[listeners]]
== Слушатели

Компонент `FileMultiUploadField` имеет следующие слушатели, описанные в разделе компонента `xref:vcl/components/file-storage-upload-field.adoc[FileStorageUploadField]`:

* `xref:vcl/components/file-storage-upload-field.adoc#file-upload-start-listener[FileUploadStartListener]`
* `xref:vcl/components/file-storage-upload-field.adoc#file-upload-finish-listener[FileUploadFinishListener]`
* `xref:vcl/components/file-storage-upload-field.adoc#file-upload-error-listener[FileUploadErrorListener]`

[[attributes]]
== Атрибуты

Компоненты `FileMultiUploadField` имеет следующие атрибуты, описанные в разделе компонента `xref:vcl/components/file-storage-upload-field.adoc[FileStorageUploadField]`:

* xref:vcl/components/file-storage-upload-field.adoc#accept[accept]
* xref:vcl/components/file-storage-upload-field.adoc#drop-zone[dropZone]
* xref:vcl/components/file-storage-upload-field.adoc#drop-zone-prompt[dropZonePrompt]
* xref:vcl/components/file-storage-upload-field.adoc#file-size-limit[fileSizeLimit]
* xref:vcl/components/file-storage-upload-field.adoc#paste-zone[pasteZone]
* xref:vcl/components/file-storage-upload-field.adoc#permitted-extensions[permittedExtensions]

[[methods]]
== Методы

* `getUploadsMap()` - возвращает `Map` с id файлов в `TemporaryStorage` на имена файлов.
* `clearUploads()` - очищает список загруженных файлов.

[[xml]]
== Все XML-атрибуты

xref:vcl/components/file-storage-upload-field.adoc#accept[accept] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/components/file-storage-upload-field.adoc#drop-zone[dropZone] -
xref:vcl/components/file-storage-upload-field.adoc#drop-zone-prompt[dropZonePrompt] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/components/file-storage-upload-field.adoc#file-size-limit[fileSizeLimit] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/components/file-storage-upload-field.adoc#paste-zone[pasteZone] -
xref:vcl/components/file-storage-upload-field.adoc#permitted-extensions[permittedExtensions] -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#tab-index[tabindex] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]