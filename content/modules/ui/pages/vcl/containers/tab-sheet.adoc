= TabSheet 标签面板
:page-aliases: backoffice-ui:vcl/containers/tab-sheet.adoc

++++
<div class="jmix-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=tabsheet-simple" class="live-demo-btn" target="_blank">在线示例</a>
</div>
++++

`TabSheet - 标签面板` 是一个布局容器，支持用标签页切换组件。标签页在 `TabSheet` 组件顶部用标签栏管理。点击一个标签页在布局的主要展示区打开其包含的组件。如果标签页多到标签栏放不下，则会显示导航按钮。

image::vcl/containers/tab-sheet.gif[align="center"]

组件的 XML 名称：`tabSheet`。

[[basics]]
== 基本用法

示例：

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/containers/tabsheet/tab-sheet-screen.xml[tags=tab-sheet]
----

`TabSheet` 组件应该包含 `tab` 元素来描述标签页。每个标签页都是一个具有类似于 xref:vcl/containers/box-layout.adoc#vbox[vbox] 的垂直组件布局的容器。

[TIP]
====
如需在 Jmix Studio 中添加 `tab`，可以在界面 XML 或者 *Component Hierarchy* 面板中选择组件，然后点击 *Component Inspector* 面板的 xref:studio:screen-designer.adoc#component-inspector-add-button[Add]*->Tab* 按钮。
====

[[tab-sheet-attributes]]
== TabSheet 属性

[[tab-caption-as-html]]
* `tabCaptionsAsHtml` - 定义 `tab` 标题是否可以用 HTML。可能值：
** `true` - 标题使用 HTML 在浏览器渲染，开发者需要保证使用无害的 HTML。
** `false` - 默认值。标题以纯文本渲染。

[[tabs-visible]]
* `tabsVisible` - 设置是否在 UI 展示标签页选择控件。可能值：values:
** `true` - 默认值。
** `false`

[[tab-element-attributes]]
== Tab 属性

* `closable` - 定义是否显示关闭 `tab` 的按钮。默认为 `false`。
* `id` - 设置标签页标识符
+
[NOTE]
====
请注意，标签页不是组件，它们的 ID 仅在 `TabSheet` 中使用，以便在控制器中引用标签页。
====
+
* xref:vcl/xml.adoc#caption[caption]
* xref:vcl/xml.adoc#description[description]
* xref:vcl/xml.adoc#enable[enable]
* xref:vcl/xml.adoc#expand[expand]
* xref:vcl/xml.adoc#icon[icon]
* <<lazy-loading-tab-content, lazy>>
* xref:vcl/xml.adoc#margin[margin]
* xref:vcl/xml.adoc#spacing[spacing]
* xref:vcl/xml.adoc#stylename[stylename]
* xref:vcl/xml.adoc#visible[visible]

[[styles]]
== TabSheet 样式

* `centered-tabs` - 使得标签页在标签栏内居中。如果标签栏能放置所有的标签页，效果最佳。
* `compact-tabbar` - 减少标签栏中标签页周围的空白。
* `equal-width-tabs` - 为标签栏中的所有标签页提供相等的宽度。如果标题过长则会截断。应用此样式时标签页滚动将会被禁用，所有标签页将同时显示。
* `framed` - 在整个组件周围以及标签页栏中的不可见标签页周围添加边框。
* `icons-on-top` - 在标签页标题上方显示标签页图标。默认情况下，图标位于标题的左侧。
* `only-selected-closable` - 只有选中的标签页显示关闭按钮。不会阻止以编程方式关闭标签页，它仅仅是对用户隐藏了关闭按钮。
* `padded-tabbar` - 为标签栏中的标签页周围添加少量内边距，以便它们不会紧挨着组件的外边缘。

//todo add a link to theme extension
`TabSheet` 的外观可以使用带 `$jmix-tabsheet-*` 前缀的 SCSS 变量进行自定义。在创建了 xref:themes/custom_theme.adoc[自定义主题] 之后，可以在可视化编辑器中修改这些变量。

[[lazy-loading-tab-content]]
== 延迟加载标签内容

默认情况下，标签页不是延迟加载的，也就是说，当界面打开时它们的内容就已经加载了。

如需启用 `tab` 内容的延迟加载，需要设置 `tab` 元素的 `lazy` 属性为 `true`。

延迟标签页不会在界面打开时加载内容。这个方案可以减少内存中组件的数量。只有当用户选择某个 `tab` 时，才会加载 `tab` 中的组件。

[NOTE]
====
//todo add link to getComponent() method
请注意，当界面打开时，在延迟 `tab` 上的组件是不存在的。因此，它们不能被添加到控制器中，并且不能在控制器的 `init()` 方法中调用 `getComponent()` 方法来获得。只有在用户打开标签页后才能访问延迟标签页中的组件。可以订阅 `SelectedTabChangeEvent` 事件捕获用户的选择。
====

例如，我们创建带有一个延迟 `tab` 的 `TabSheet`。为了显示 `tab` 的状态，我们使用一个文本标签 `id="info"`。

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/containers/tabsheet/tab-sheet-screen.xml[tags=lazy-tab]
----

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/containers/tabsheet/TabSheetScreen.java[tags=lazy-tab]
----

上面的例子中，界面初始化时，调用了 `checkComponents()`。由于 `label2` 在延迟 `tab` 中，使用 `getComponentNN()` 方法无法获取 `label2`。但是当用户选择 `tab2` 时，会触发 `SelectedTabChangeEvent` 事件，此时再次调用 `checkComponents()` 方法，现在我们可以获取 XML 中定义的 `label2` 的值了。

image::vcl/containers/tab-sheet-lazy-tab.gif[align="center"]

[[xml]]
== XML 属性

xref:vcl/xml.adoc#align[align] -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
xref:vcl/xml.adoc#stylename[stylename] -
<<tab-caption-as-html, tabCaptionsAsHtml>> -
xref:vcl/xml.adoc#tab-index[tabIndex] -
<<tabs-visible, tabsVisible>> -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]
