= Генератор маршрутов URL

Иногда необходимо получить правильный URL некоторого экрана приложения, который можно отправить по электронной почте или показать пользователю. Самый простой способ создать его – использовать генератор маршрутов URL.

Генератор маршрутов URL предоставляет API для генерации ссылок на экран редактирования сущности или на экран, определенный его идентификатором или классом. Ссылка также может содержать параметры URL, которые позволяют отобразить внутреннее состояние экрана на URL, чтобы использовать его позже.

В бине `UrlRouting` реализован метод `getRouteGenerator()`, позволяющий получить экземпляр `RouteGenerator`. `RouteGenerator` имеет следующие методы:

* `getRoute(String screenId)` - возвращает маршрут для экрана с заданным `screenId`, например:
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/urlhistorynav/UrlRoutesGeneratorScreen.java[tags=get-route-by-screen-id]
----
+
Результирующий URL будет похож на `++http://host:port/#main/customers++`

* `getRoute(Class<? extends Screen> screenClass)` - генерирует маршрут для экрана с заданным `screenClass`, например:
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/urlhistorynav/UrlRoutesGeneratorScreen.java[tags=get-route-by-screen-class]
----
+
Результирующий URL будет похож на `++http://host:port/#main/customers++`

* `getEditorRoute(Object entity)` - генерирует маршрут к дефолтному экрану редактирования заданной сущности, например:
+
[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/urlhistorynav/UrlRoutesGeneratorScreen.java[tags=get-editor-route]
----
+
Результирующий URL будет похож на `++http://host:port/#main/customers/edit?id=5jqtc3pwzx6g6mq1vv5gkyjn0s++`

* `getEditorRoute(Object entity, Class<? extends Screen> screenClass)` - генерирует маршрут для экрана редактирования с заданными `screenClass` и `entity`.

* `getRoute(Class<? extends Screen> screenClass, Map<String, String> urlParams)` - генерирует маршрут для экрана с заданными `screenClass` и `urlParams`.

[[example]]
== Пример использования генератора маршрутов URL

Предположим, что у нас есть сущность `Customer` со стандартными экранами, для которых зарегистрированы маршруты. Добавим на экран браузера кнопку, которая генерирует ссылку на экран редактирования выбранной сущности:

[source,java,indent=0]
----
include::example$/ex1/src/main/java/ui/ex1/screen/entity/customer/CustomerBrowse.java[tags=inject-url-routing;inject-dialogs;get-editor-route]
----

Результирующий маршрут выглядит следующим образом:

image::url-history-navigation/customer-route.png[align="center"]