= BrowserFrame

++++
<div class="backoffice-ui-live-demo-container">
    <a href="https://demo.jmix.io/sampler/#main/sample?id=browserframe-classpath" class="live-demo-btn" target="_blank">ДЕМОНСТРАЦИЯ</a>
</div>
++++

`BrowserFrame` позволяет встраивать в экраны UI веб-страницы, PDF-файлы и изображения.

image::vcl/components/browser-frame.png[align="center"]

XML-имя компонента: `browserFrame`.

[[basics]]
== Основы

Чтобы отобразить некоторый контент, необходимо определить элемент `resource` с одним из следующих вложенных элементов:

* `classpath`
* `file`
* `relativePath`
* `theme`
* `url`

Например:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=url-example]
----

Узнать больше о xref:vcl/components/image.adoc#resources[ресурсах] и xref:vcl/components/image.adoc#resource-settings[настройках ресурсов] можно на странице компонента xref:vcl/components/image.adoc[].

[[attributes]]
== Атрибуты

[[allow]]
=== allow

Данный атрибут определяет https://developers.google.com/web/updates/2018/06/feature-policy[Feature Policy^] для компонента. Значение атрибута может быть разделенным пробелами списком следующих возможных значений, которые позволяют текущему встроенному документу:

1. `autoplay` - автоматически воспроизводить медиа, запрашиваемое через интерфейс.
2. `camera` - использовать внешние видеоустройства.
3. `document-domain` - устанавливать `document.domain`.
4. `encrypted-media` - использовать Encrypted Media Extensions API (EME).
5. `fullscreen` - использовать `Element.requestFullScreen()`.
6. `geolocation` - использовать Geolocation Interface.
7. `microphone` -  использовать внешние аудиоустройства.
8. `midi` - использовать Web MIDI API.
9. `payment` - использовать Payment Request API.
10. `vr` - использовать WebVR API.

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=allow]
----

[[alternate-text]]
=== alternateText

Данный атрибут устанавливает альтернативный текст на случай, если ресурс недоступен или не задан.

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=alternative-text]
----

[[referrerpolicy]]
=== referrerpolicy

Данный атрибут указывает, какой реферер отправлять при извлечении ресурса фрейма. Значение атрибута может быть разделенным пробелами списком следующих возможных значений:

1. `no-referrer` - заголовок реферера не будет отправлен.
2. `no-referrer-when-downgrade` - заголовок реферера не будет отправлен в источник без TLS (HTTPS).
3. `origin` - отправленный реферер будет ограничен источником ссылающейся страницы: ее схемой, хостом и портом.
4. `origin-when-cross-origin` -  реферер, отправленный в другие источники, будет ограничен схемой, хостом и портом. Навигация по тому же источнику будет по-прежнему включать путь.
5. `same-origin` - реферер будет отправлен для того же источника, но перекрестные запросы не будут содержать информацию о реферере.
6. `strict-origin` - отправляет источник документа в качестве реферера только тогда, когда уровень безопасности протокола остается прежним (HTTPS->HTTPS), но не отправляет его в менее безопасное место назначения (HTTPS->HTTP).
7. `strict-origin-when-cross-origin` - отправляет полный URL-адрес при выполнении запроса из того же источника только тогда, когда уровень безопасности протокола остается прежним (HTTPS->HTTPS), но не отправляет его в менее безопасное место назначения (HTTPS->HTTP).
8. `unsafe-url` - реферер будет включать в себя источник и путь. Это значение небезопасно, поскольку оно приводит к утечке источников и путей из защищенных TLS ресурсов в небезопасные источники.

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=referrerpolicy]
----

[[sandbox]]
=== sandbox

Данный атрибут накладывает дополнительные ограничения на содержимое фрейма. Если значение атрибута пустое, то применяются все ограничения. Если значение атрибута представляет собой разделенный пробелами список ограничений, то указанные ограничения снимаются. Значение атрибута может быть разделенным пробелами списком следующих возможных значений:

1. `allow-downloads-without-user-activation` - позволяет загружать файлы без инициации пользователем.
2. `allow-forms` - позволяет содержимому фрейма отправлять формы.
3. `allow-modals` - позволяет содержимому фрейма открывать модальные окна.
4. `allow-orientation-lock` - позволяет содержимому фрейма блокировать ориентацию экрана.
5. `allow-pointer-lock` - позволяет содержимому фрейма использовать Pointer Lock API.
6. `allow-popups` -  позволяет содержимому фрейма использовать всплывающие окна, такие как:
* `window.open()`
* `target="_blank"`
* `showModalDialog()`
7. `allow-popups-to-escape-sandbox` -  позволяет содержимому фрейма открывать новые всплывающие окна, создавая чистый контекст просмотра.
8. `allow-presentation` - позволяет содержимому фрейма использовать Presentation API.
9. `allow-same-origin` - позволяет загружать содержимое фрейма, воспринимая его из того же источника, что и родительский документ.
10. `allow-scripts` - разрешает запуск и выполнение скриптов.
11. `allow-storage-access-by-user-activation` -  позволяет ресурсу запрашивать доступ к возможностям родительского хранилища с помощью Storage Access API.
12. `allow-top-navigation` - позволяет содержимому фрейма получать доступ к элементам верхнего уровня (с именем `_top`).
13. `allow-top-navigation-by-user-activation` - позволяет содержимому фрейма получать доступ к элементам верхнего уровня, если это инициировано пользователем.

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=sandbox]
----

[[srcdoc]]
=== srcdoc

Данный атрибут определяет HTML-контент для отображения во встроенном фрейме. Для этого нужно заэкранировать HTML-код, например:

[source,xml,indent=0]
----
include::example$/ex1/src/main/resources/ui/ex1/screen/component/browserframe/browser-frame-screen.xml[tags=srcdoc]
----

image::vcl/components/browser-frame-src.png[align="center"]

[[srcdoc-file]]
=== srcdocFile

Данный атрибут путь к файлу, содержащему HTML-код. Содержимое файла получается с помощью ресурса `classPath`.

[[handlers]]
== События и обработчики

include::../events-hanlers-generation-tip.adoc[]

[[context-help-icon-click-event]]
=== ContextHelpIconClickEvent

См. xref:vcl/api.adoc#context-help-icon-click-handler[ContextHelpIconClickEvent].

[[source-change-event]]
=== SourceChangeEvent

См. xref:vcl/components/image.adoc#source-change-event[SourceChangeEvent].

[[xml]]
== Все XML-атрибуты

include::../xml-studio-tip.adoc[]

xref:vcl/xml.adoc#align[align] -
<<allow, allow>> -
<<alternate-text, alternateText>> -
xref:vcl/xml.adoc#box-expand-ratio[box.expandRatio] -
xref:vcl/xml.adoc#caption[caption] -
xref:vcl/xml.adoc#caption-as-html[captionAsHtml] -
xref:vcl/xml.adoc#colspan[colspan] -
xref:vcl/xml.adoc#context-help-text[contextHelpText] -
xref:vcl/xml.adoc#context-help-text-html-enabled[contextHelpTextHtmlEnabled] -
xref:vcl/xml.adoc#css[css] -
xref:vcl/xml.adoc#description[description] -
xref:vcl/xml.adoc#description-as-html[descriptionAsHtml] -
xref:vcl/xml.adoc#enable[enable] -
xref:vcl/xml.adoc#height[height] -
xref:vcl/xml.adoc#html-sanitizer-enabled[htmlSanitizerEnabled] -
xref:vcl/xml.adoc#icon[icon] -
xref:vcl/xml.adoc#id[id] -
<<referrerpolicy, referrerpolicy>> -
xref:vcl/xml.adoc#responsive[responsive] -
xref:vcl/xml.adoc#rowspan[rowspan] -
<<sandbox, sandbox>> -
<<srcdoc, srcdoc>> -
<<srcdoc-file, srcdocFile>> -
xref:vcl/xml.adoc#stylename[stylename] -
xref:vcl/xml.adoc#visible[visible] -
xref:vcl/xml.adoc#width[width]